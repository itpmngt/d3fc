(function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("d3-array"),require("d3-scale"),require("d3-time"),require("d3-random"),require("d3-fetch"),require("d3-path"),require("d3-selection"),require("d3-shape"),require("d3-dispatch"),require("d3-brush")):"function"==typeof define&&define.amd?define(["exports","d3-array","d3-scale","d3-time","d3-random","d3-fetch","d3-path","d3-selection","d3-shape","d3-dispatch","d3-brush"],t):(e=e||self,t(e.fc={},e.d3,e.d3,e.d3,e.d3,e.d3,e.d3,e.d3,e.d3,e.d3,e.d3))})(this,function(e,t,a,n,i,r,l,o,d,s,c){'use strict';var R=Math.round,O=Math.floor,H=Math.min,N=Math.ceil,W=Math.exp,Y=Math.max,G=Math.abs;function h(e){return e}function g(){}function u(e){return"function"==typeof e?e:()=>e}function f(e){return"number"==typeof e&&isNaN(e)?void 0:e}function m(){let e=()=>10,t=g,a=h,n=e=>null!=e;var i=function(i){const r=e.apply(this,arguments),l=i.slice(0,r).map(a);return i.map((e,o)=>(o>=r&&(l.shift(),l.push(a(e,o))),o<r-1||l.some(e=>!n(e))?t(void 0,o):t(l,o)))};return i.period=(...t)=>t.length?(e=u(t[0]),i):e,i.accumulator=(...e)=>e.length?(t=e[0],i):t,i.defined=(...e)=>e.length?(n=e[0],i):n,i.value=(...e)=>e.length?(a=e[0],i):a,i}function p(){let e=2;const a=m().accumulator(a=>{const n=a&&t.deviation(a),i=a&&t.mean(a);return{average:i,upper:f(i+e*n),lower:f(i-e*n)}}),n=e=>a(e);return n.multiplier=(...t)=>t.length?(e=t[0],n):e,U(n,a,"period","value"),n}function y(){let e=h,a=()=>9;const n=e=>{let a=[];return n=>{let i;return a.length<e&&(null==n?a=[]:a.push(n)),a.length>=e&&(i=t.mean(a)),i}},i=function(t){const i=a.apply(this,arguments),r=2/(i+1),l=n(i);let o;return t.map((t,a)=>{const n=e(t,a);return o=void 0===o?l(n):n*r+(1-r)*o,f(o)})};return i.period=(...e)=>e.length?(a=u(e[0]),i):a,i.value=(...t)=>t.length?(e=t[0],i):e,i}function b(){let e=h;const a=y().period(12),n=y().period(26),i=y().period(9),r=r=>{a.value(e),n.value(e);const l=t.zip(a(r),n(r)).map(e=>void 0!==e[0]&&void 0!==e[1]?e[0]-e[1]:void 0),o=i(l);return t.zip(l,o).map(e=>({macd:e[0],signal:e[1],divergence:void 0!==e[0]&&void 0!==e[1]?e[0]-e[1]:void 0}))};return r.value=(...t)=>t.length?(e=t[0],r):e,q(r,a,Z({period:"fastPeriod"})),q(r,n,Z({period:"slowPeriod"})),q(r,i,Z({period:"signalPeriod"})),r}function x(){const e=m().accumulator(e=>e&&t.mean(e)),a=t=>e(t);return U(a,e,"period","value"),a}function v(){let e=.1,t=h;const a=a=>a.map(a=>{const n=f(t(a)*(1-e)),i=f(t(a)*(1+e));return{lower:n,upper:i}});return a.factor=(...t)=>t.length?(e=t[0],a):e,a.value=(...e)=>e.length?(t=e[0],a):t,a}function S(){let e=e=>e.close,a=e=>e.high,n=e=>e.low;const i=y().period(13),r=r=>(i.value(e),t.zip(r,i(r)).map(e=>{const t=f(a(e[0])-e[1]),i=f(n(e[0])-e[1]);return{bullPower:t,bearPower:i}}));return r.closeValue=(...t)=>t.length?(e=t[0],r):e,r.highValue=(...e)=>e.length?(a=e[0],r):a,r.lowValue=(...e)=>e.length?(n=e[0],r):n,U(r,i,"period"),r}function w(){var e={};return e.distance=function(e,t){return t-e},e.offset=function(e,t){return e instanceof Date?new Date(e.getTime()+t):e+t},e.clampUp=e=>e,e.clampDown=e=>e,e.copy=()=>e,e}function k(e,t){const a=[];for(const n of e){const e=t.clampUp(n),i=t.clampDown(n);e===i&&a.push(e)}return a}function V(e){arguments.length||(e=a.scaleIdentity());var t=w();const n=a=>{var n=e.domain(),i=e.range(),r=t.distance(n[0],n[1]),l=t.distance(n[0],a),o=l/r*(i[1]-i[0])+i[0];return o};return n.invert=a=>{var n=e.domain(),i=e.range(),r=(a-i[0])/(i[1]-i[0]),l=t.distance(n[0],n[1]);return t.offset(n[0],r*l)},n.domain=(...a)=>{if(!a.length)return e.domain();const i=a[0];var r=t.clampUp(i[0]),l=t.clampDown(i[1]);return e.domain([r,l]),n},n.nice=()=>{e.nice();var a=e.domain(),i=t.clampUp(a[0]),r=t.clampDown(a[1]);return e.domain([i,r]),n},n.ticks=(...a)=>{var n=e.ticks.apply(this,a);return k(n,t)},n.copy=()=>V(e.copy()).discontinuityProvider(t.copy()),n.discontinuityProvider=(...e)=>e.length?(t=e[0],n):t,q(n,e,J("range","rangeRound","interpolate","clamp","tickFormat")),n}function A(){let e=[e=>e],a=[0,0],n="percent",i=null,r=[];const l=l=>{const o=Array(l.length);for(const t of e)for(let e=0;e<l.length;e++){const a=t(l[e],e);Array.isArray(a)?o.push(...a):o.push(a)}const d=[t.min(o),t.max(o)];if(d[0]=null==d[0]?t.min(r):t.min([d[0],...r]),d[1]=null==d[1]?t.max(r):t.max([d[1],...r]),null!=i){const e=Y(G(d[1]-i),G(d[0]-i));d[0]=i-e,d[1]=i+e}switch(n){case"domain":{d[0]-=a[0],d[1]+=a[1];break}case"percent":{const e=d[1]-d[0];d[0]-=a[0]*e,d[1]+=a[1]*e;break}default:throw new Error(`Unknown padUnit: ${n}`);}return d};return l.accessors=(...t)=>t.length?(e=t[0],l):e,l.pad=(...e)=>e.length?(a=e[0],l):a,l.padUnit=(...e)=>e.length?(n=e[0],l):n,l.include=(...e)=>e.length?(r=e[0],l):r,l.symmetricalAbout=(...e)=>e.length?(i=e[0],l):i,l}function I(){let e=[],t=[0,0],a="percent",n=null,i=[];const r=A(),l=e=>null==e?null:e.valueOf(),o=o=>{const d=e.map(e=>(...t)=>{const a=e(...t);return Array.isArray(a)?a.map(l):l(a)});return r.accessors(d).pad(t).padUnit(a).symmetricalAbout(null==n?null:n.valueOf()).include(i.map(e=>e.valueOf())),r(o).map(e=>new Date(e))};return o.accessors=(...t)=>t.length?(e=t[0],o):e,o.pad=(...e)=>e.length?(t=e[0],o):t,o.padUnit=(...e)=>e.length?(a=e[0],o):a,o.include=(...e)=>e.length?(i=e[0],o):i,o.symmetricalAbout=(...e)=>e.length?(n=e[0],o):n,o}function T(){let e=1,t=20,a=.1,n=.1,r=i.randomNormal();var l=(i=0)=>{var l=Math.sqrt;const o=e/t,d=[];for(let e=0;e<t+1;e++){d.push(i);const e=r()*l(o)*n+(a-n*n/2)*o;i*=W(e)}return d};return l.period=(...t)=>t.length?(e=t[0],l):e,l.steps=(...e)=>e.length?(t=e[0],l):t,l.mu=(...e)=>e.length?(a=e[0],l):a,l.sigma=(...e)=>e.length?(n=e[0],l):n,l.random=(...e)=>e.length?(r=e[0],l):r,l}function _(e){return"function"==typeof e?e:()=>e}function E(){let e=new Date,t=100,a=n.timeDay,r=1,l=n.timeYear,o=1,d=null,s=()=>{const e=i.randomNormal(1,.1);return N(1e3*e())};const c=T(),h=e=>{const t=l.offset(e,o)-e;return(a.offset(e,r)-e)/t},g=(e,t)=>{const a=h(e),n=c.period(a)(t),i={date:e,open:n[0],high:Y.apply(Math,n),low:H.apply(Math,n),close:n[c.steps()]};return i.volume=s(i),i},u=n=>{let i,l,o;do i=n?a.offset(n.date,r):new Date(e.getTime()),l=n?n.close:t,n=g(i,l),o=d&&!d(n);while(o);return n},f=()=>{let e;const t={};return t.next=()=>{const t=u(e);return e=t,t},t.take=e=>t.until((t,a)=>!e||0>e||a===e),t.until=t=>{const a=[];let n=0,i=u(e),r=t&&!t(i,n);for(;r;)a.push(i),e=i,i=u(e),n+=1,r=t&&!t(i,n);return a},t},m=e=>f().take(e);if(m.stream=f,"function"!=typeof Symbol||"symbol"!=typeof Symbol.iterator)throw new Error("d3fc-random-data depends on Symbol. Make sure that you load a polyfill in older browsers. See README.");return m[Symbol.iterator]=()=>{const e=f();return{next:()=>({value:e.next(),done:!1})}},m.startDate=(...t)=>t.length?(e=t[0],m):e,m.startPrice=(...e)=>e.length?(t=e[0],m):t,m.interval=(...e)=>e.length?(a=e[0],m):a,m.intervalStep=(...e)=>e.length?(r=e[0],m):r,m.unitInterval=(...e)=>e.length?(l=e[0],m):l,m.unitIntervalStep=(...e)=>e.length?(o=e[0],m):o,m.filter=(...e)=>e.length?(d=e[0],m):d,m.volume=(...e)=>e.length?(s=_(e[0]),m):s,q(m,c),m}function P(){var e="BTC-USD",t=null,a=null,n=null,i=function(){var i=[];null!=t&&i.push("start="+t.toISOString()),null!=a&&i.push("end="+a.toISOString()),null!=n&&i.push("granularity="+n);var l="https://api.gdax.com/products/"+e+"/candles?"+i.join("&");return r.json(l).then(function(e){return e.map(function(e){return{date:new Date(1e3*e[0]),open:e[3],high:e[2],low:e[1],close:e[4],volume:e[5]}})})};return i.product=function(t){return arguments.length?(e=t,i):e},i.start=function(e){return arguments.length?(t=e,i):t},i.end=function(e){return arguments.length?(a=e,i):a},i.granularity=function(e){return arguments.length?(n=e,i):n},i}function B(){var e=10,a=a=>1>=e?a.map(e=>[e]):t.range(0,N(a.length/e)).map(t=>a.slice(t*e,(t+1)*e));return a.bucketSize=function(t){return arguments.length?(e=t,a):e},a}function z(){function e(e){var a=e.map(e=>[n(e),i(e)]),r=t.range(1,a.length-1).map(e=>{var t=a[e-1],n=a[e],i=a[e+1];return .5*G((t[0]-i[0])*(n[1]-t[1])-(t[0]-n[0])*(i[1]-t[1]))});return r}var a=B(),n=e=>e,i=e=>e;const r=n=>{if(a.bucketSize()>=n.length)return n;var i=e(n),r=a(i),l=a(n.slice(1,n.length-1)),o=l.map((e,a)=>{var n=r[a],i=t.max(n),l=n.indexOf(i);return e[l]});return[].concat([n[0]],o,[n[n.length-1]])};return U(r,a,"bucketSize"),r.x=function(e){return arguments.length?(n=e,r):n},r.y=function(e){return arguments.length?(i=e,r):i},r}function C(){var e=e=>e,a=e=>e,n=B();const i=i=>{if(n.bucketSize()>=i.length)return i;var r=n(i.slice(1,i.length-1)),l=i[0],o=i[i.length-1],d=[].concat([l],r,[o]),s=e(l),c=a(l),h=r.map((n,r)=>{var i=t.mean(d[r+1],e),l=t.mean(d[r+1],a),o=n.map(t=>[e(t),a(t)]),h=o.map(e=>.5*G((s-i)*(e[1]-c)-(s-e[0])*(l-c))),g=h.indexOf(t.max(h)),u=o[g];return s=u[0],c=u[1],n[g]});return[].concat([i[0]],h,[i[i.length-1]])};return U(i,n,"bucketSize"),i.x=function(t){return arguments.length?(e=t,i):e},i.y=function(e){return arguments.length?(a=e,i):a},i}function L(){var e=B(),a=e=>e;const n=n=>{if(e.bucketSize()>n.length)return n;var i=t.extent(n,a),r=e(n.slice(1,n.length-1)),l=r.map(e=>{var t,n,r={},l=!0,o=e.map(a),d=o.filter(e=>e===i[0]||e===i[1]).map(e=>o.indexOf(e))[0];return void 0===d?(o.forEach((e,a)=>{void 0===r[e]&&(r[e]=0),r[e]++,r[e]>r[t]||void 0===t?(t=e,n=a,l=!0):r[e]===r[t]&&(l=!1)}),l?e[n]:e[O(e.length/2)]):e[d]});return[].concat([n[0]],l,[n[n.length-1]])};return U(n,e,"bucketSize"),n.value=function(e){return arguments.length?(a=e,n):a},n}function D(){const e=arguments;return function(t,a){for(let n=0,i=e.length;n<i;n++)if(null==e[n](t,a))return!1;return!0}}var M="default"in a?a["default"]:a,F="default"in d?d["default"]:d,Q=(e,t,a)=>{const n=t[a];if("function"!=typeof n)throw new Error(`Attempt to rebind ${a} which isn't a function on the source object`);return(...a)=>{var i=n.apply(t,a);return i===t?e:i}},U=(e,t,...a)=>{for(const n of a)e[n]=Q(e,t,n);return e};const X=e=>t=>e.reduce((e,t)=>e&&t(e),t);var q=(e,t,...a)=>{const n=X(a);for(const i of Object.keys(t)){const a=n(i);a&&(e[a]=Q(e,t,i))}return e},j=e=>e.map(e=>"string"==typeof e?new RegExp(`^${e}$`):e),K=(...e)=>(e=j(e),t=>e.every(e=>!e.test(t))&&t),J=(...e)=>(e=j(e),t=>e.some(e=>e.test(t))&&t),Z=e=>t=>e[t];const $=e=>e[0].toUpperCase()+e.slice(1);var ee=e=>t=>e+$(t);const te=(e,t,a,n)=>{const i={sunday:0,monday:1,saturday:6},r=86400000,l=5*r,o={},d=t=>0===e(t)||6===e(t);return o.clampDown=a=>{if(a&&d(a)){const n=t.ceil(a);return e(n)===i.sunday?t.offset(n,-1):e(n)===i.monday?t.offset(n,-2):n}return a},o.clampUp=a=>{if(a&&d(a)){const n=t.floor(a);return e(n)===i.saturday?t.offset(n,2):e(n)===i.sunday?t.offset(n,1):n}return a},o.distance=function(e,t){e=o.clampUp(e),t=o.clampDown(t);const n=a.ceil(e);if(t<n)return t.getTime()-e.getTime();const i=n.getTime()-e.getTime(),d=a.ceil(t),s=d.getTime()-t.getTime(),c=R((d.getTime()-n.getTime())/(7*r));return c*l+i-s},o.offset=function(e,i){let r=d(e)?o.clampUp(e):e;if(0===i)return r;const s=0>i;let c=i;const h=s?n.floor(r):a.ceil(r);if(c-=h.getTime()-r.getTime(),s&&0<c||0<i&&0>c)return new Date(r.getTime()+i);r=s?h:t.offset(h,2);const g=O(c/l);return r=t.offset(r,7*g),c-=g*l,r=new Date(r.getTime()+c),r},o.copy=function(){return o},o};var ae=e=>"function"==typeof e?e:()=>e,ne=()=>{let e=null,t=e=>e.date,a=e=>e.open,n=e=>e.high,r=e=>e.low,o=e=>e.close,s="vertical",c=ae(3);const h=function(i){const h=e||l.path();return i.forEach(function(e,l){const i=t(e,l),d=a(e,l),g=n(e,l),u=r(e,l),f=o(e,l),m=c(e,l)/2;"vertical"===s?(h.moveTo(i,u),h.lineTo(i,g),h.moveTo(i,d),h.lineTo(i-m,d),h.moveTo(i,f),h.lineTo(i+m,f)):(h.moveTo(u,i),h.lineTo(g,i),h.moveTo(d,i),h.lineTo(d,i+m),h.moveTo(f,i),h.lineTo(f,i-m))}),e?null:h.toString()};return h.context=(...t)=>t.length?(e=t[0],h):e,h.x=(...e)=>e.length?(t=ae(e[0]),h):t,h.open=(...e)=>e.length?(a=ae(e[0]),h):a,h.high=(...e)=>e.length?(n=ae(e[0]),h):n,h.low=(...e)=>e.length?(r=ae(e[0]),h):r,h.close=(...e)=>e.length?(o=ae(e[0]),h):o,h.width=(...e)=>e.length?(c=ae(e[0]),h):c,h.orient=(...e)=>e.length?(s=e[0],h):s,h},ie=()=>{let e=null,t=e=>e.x,a=e=>e.y,n="center",i="center",r=e=>e.height,o=ae(3);const d=function(d,s){const c=e||l.path();return d.forEach(function(e,l){const d=t.call(this,e,s||l),h=a.call(this,e,s||l),g=r.call(this,e,s||l),u=o.call(this,e,s||l);let f;switch(n){case"left":f=u;break;case"right":f=0;break;case"center":f=u/2;break;default:throw new Error("Invalid horizontal alignment "+n);}let m;switch(i){case"bottom":m=-g;break;case"top":m=0;break;case"center":m=g/2;break;default:throw new Error("Invalid vertical alignment "+i);}c.rect(d-f,h-m,u,g)},this),e?null:c.toString()};return d.context=(...t)=>t.length?(e=t[0],d):e,d.x=(...e)=>e.length?(t=ae(e[0]),d):t,d.y=(...e)=>e.length?(a=ae(e[0]),d):a,d.width=(...e)=>e.length?(o=ae(e[0]),d):o,d.horizontalAlign=(...e)=>e.length?(n=e[0],d):n,d.height=(...e)=>e.length?(r=ae(e[0]),d):r,d.verticalAlign=(...e)=>e.length?(i=e[0],d):i,d},re=()=>{let e=null,t=e=>e.date,a=e=>e.open,n=e=>e.high,r=e=>e.low,o=e=>e.close,s=ae(3);const c=function(i){const c=e||l.path();return i.forEach(function(e,l){const i=t(e,l),d=a(e,l),h=n(e,l),g=r(e,l),u=o(e,l),f=s(e,l);c.rect(i-f/2,d,f,u-d),c.moveTo(i,H(u,d)),c.lineTo(i,h),c.moveTo(i,Y(u,d)),c.lineTo(i,g)}),e?null:c.toString()};return c.context=(...t)=>t.length?(e=t[0],c):e,c.x=(...e)=>e.length?(t=ae(e[0]),c):t,c.open=(...e)=>e.length?(a=ae(e[0]),c):a,c.high=(...e)=>e.length?(n=ae(e[0]),c):n,c.low=(...e)=>e.length?(r=ae(e[0]),c):r,c.close=(...e)=>e.length?(o=ae(e[0]),c):o,c.width=(...e)=>e.length?(s=ae(e[0]),c):s,c},le=()=>{let e=null,t=e=>e.value,a=e=>e.median,n=e=>e.upperQuartile,r=e=>e.lowerQuartile,o=e=>e.high,s=e=>e.low,c="vertical",h=ae(5),g=ae(.5);const u=function(i){const u=e||l.path();return i.forEach(function(e,l){const i=t(e,l),d=h(e,l),f=d/2,m=d*g(e,l),p=m/2,y=o(e,l),b=n(e,l),x=a(e,l),v=r(e,l),S=s(e,l),w=v-b;"vertical"===c?(u.moveTo(i-p,y),u.lineTo(i+p,y),u.moveTo(i,y),u.lineTo(i,b),u.rect(i-f,b,d,w),u.moveTo(i-f,x),u.lineTo(i+f,x),u.moveTo(i,v),u.lineTo(i,S),u.moveTo(i-p,S),u.lineTo(i+p,S)):(u.moveTo(S,i-p),u.lineTo(S,i+p),u.moveTo(S,i),u.lineTo(v,i),u.rect(v,i-f,-w,d),u.moveTo(x,i-f),u.lineTo(x,i+f),u.moveTo(b,i),u.lineTo(y,i),u.moveTo(y,i-p),u.lineTo(y,i+p))}),e?null:u.toString()};return u.context=(...t)=>t.length?(e=t[0],u):e,u.value=(...e)=>e.length?(t=ae(e[0]),u):t,u.median=(...e)=>e.length?(a=ae(e[0]),u):a,u.upperQuartile=(...e)=>e.length?(n=ae(e[0]),u):n,u.lowerQuartile=(...e)=>e.length?(r=ae(e[0]),u):r,u.high=(...e)=>e.length?(o=ae(e[0]),u):o,u.low=(...e)=>e.length?(s=ae(e[0]),u):s,u.width=(...e)=>e.length?(h=ae(e[0]),u):h,u.orient=(...e)=>e.length?(c=e[0],u):c,u.cap=(...e)=>e.length?(g=ae(e[0]),u):g,u},oe=()=>{let e=null,t=e=>e.x,a=e=>e.high,n=e=>e.low,r="vertical",o=ae(5);const d=function(i){const s=e||l.path();return i.forEach(function(e,l){const i=t(e,l),d=o(e,l),c=d/2,h=a(e,l),g=n(e,l);"vertical"===r?(s.moveTo(i-c,h),s.lineTo(i+c,h),s.moveTo(i,h),s.lineTo(i,g),s.moveTo(i-c,g),s.lineTo(i+c,g)):(s.moveTo(g,i-c),s.lineTo(g,i+c),s.moveTo(g,i),s.lineTo(h,i),s.moveTo(h,i-c),s.lineTo(h,i+c))}),e?null:s.toString()};return d.context=(...t)=>t.length?(e=t[0],d):e,d.value=(...e)=>e.length?(t=ae(e[0]),d):t,d.high=(...e)=>e.length?(a=ae(e[0]),d):a,d.low=(...e)=>e.length?(n=ae(e[0]),d):n,d.width=(...e)=>e.length?(o=ae(e[0]),d):o,d.orient=(...e)=>e.length?(r=e[0],d):r,d},de=e=>"function"==typeof e?e:()=>e;const se=1e-6;var ce=(e,t)=>{e=e||"g";let a=(e,t)=>t,n=null;const i=function(i,r){r=r||(e=>e);const l=i.selection?i:null;l&&(i=i.selection());const o=i.selectAll((e,t,a)=>Array.from(a[t].childNodes).filter(e=>1===e.nodeType)).filter(null==t?e:`${e}.${t}`);let d=o.data(r,a);const s=d.enter().append(e).attr("class",t);let c=d.exit();d=d.merge(s);const h=l||n;return h&&(d=d.transition(h).style("opacity",1),s.style("opacity",se),c=c.transition(h).style("opacity",se)),c.remove(),d.enter=()=>s,d.exit=()=>c,d};return i.element=(...t)=>t.length?(e=t[0],i):e,i.className=(...e)=>e.length?(t=e[0],i):t,i.key=(...e)=>e.length?(a=e[0],i):a,i.transition=(...e)=>e.length?(n=e[0],i):n,i};const he=(e,t)=>!(e.x>=t.x+t.width||e.x+e.width<=t.x||e.y>=t.y+t.height||e.y+e.height<=t.y);var ge=(e,t)=>{if(he(e,t)){const a=Y(e.x,t.x),n=H(e.x+e.width,t.x+t.width),i=Y(e.y,t.y),r=H(e.y+e.height,t.y+t.height);return(n-a)*(r-i)}return 0};const ue=(e,a)=>t.sum(e.map((t,n)=>a===n?0:ge(e[a],t))),fe=(e,t,a,n,i)=>({x:e,y:t,width:a,height:n,location:i});var me=e=>{const t=e.x,a=e.y,n=e.width,i=e.height;return[fe(t,a,n,i,"bottom-right"),fe(t-n,a,n,i,"bottom-left"),fe(t-n,a-i,n,i,"top-left"),fe(t,a-i,n,i,"top-right"),fe(t,a-i/2,n,i,"middle-right"),fe(t-n/2,a,n,i,"bottom-center"),fe(t-n,a-i/2,n,i,"middle-left"),fe(t-n/2,a-i,n,i,"top-center")]};const pe=(e,t,a)=>[...e.slice(0,t),a,...e.slice(t+1)],ye=(e,t)=>e<t,be=()=>{let e,a=null,n=ye,l=()=>0;const o=(t,n)=>a-l(e[n],n,e)+l(t,n,pe(e,n,t)),d=(i,r)=>{a||(a=t.sum(e.map((t,a)=>l(t,a,e))));const s=o(i,r);return n(s,a)?be().locationScore(l).winningScore(n).score(s).rectangles(pe(e,r,i)):d};return d.rectangles=(...t)=>t.length?(e=t[0],d):e,d.score=(...e)=>e.length?(a=e[0],d):a,d.winningScore=(...e)=>e.length?(n=e[0],d):n,d.locationScore=(...e)=>e.length?(l=e[0],d):l,d};const xe=e=>e[ve(e)],ve=e=>O(Math.random()*e.length);const Se=(e,a)=>e[t.scan(e,a)];var we=e=>"function"==typeof e?e:()=>e,ke=(e,t)=>"left"===e?t/2:"right"===e?-t/2:0,Ve=e=>{const t=Object.assign({},e),a=()=>{};return Object.keys(t).forEach(e=>{a[e]=(...n)=>n.length?(t[e]=n[0],a):t[e]}),a},Ae=()=>{let e=()=>0,t=e=>e.x,n=e=>e.y,r="center",l=()=>5,o="vertical";const s=Ve({decorate:()=>{},defined:(a,r)=>D(e,t,n)(a,r),xScale:a.scaleIdentity(),yScale:a.scaleIdentity()});return s.values=(a,d)=>{const i=l(a,d),c=ke(r,i),h=s.xScale(),g=s.yScale();if("vertical"===o){const r=g(n(a,d),d),l=g(e(a,d),d),o=h(t(a,d),d)+c;return{d:a,x:o,y:r,y0:l,width:i,height:r-l,origin:[o,r],baseOrigin:[o,l],transposedX:o,transposedY:r}}else{const r=h(n(a,d),d),l=h(e(a,d),d),o=g(t(a,d),d)+c;return{d:a,x:o,y:r,y0:l,width:i,height:r-l,origin:[r,o],baseOrigin:[l,o],transposedX:r,transposedY:o}}},s.xValues=()=>"vertical"===o?[t]:[e,n],s.yValues=()=>"vertical"===o?[e,n]:[t],s.baseValue=(...t)=>t.length?(e=we(t[0]),s):e,s.crossValue=(...e)=>e.length?(t=we(e[0]),s):t,s.mainValue=(...e)=>e.length?(n=we(e[0]),s):n,s.bandwidth=(...e)=>e.length?(l=we(e[0]),s):l,s.align=(...e)=>e.length?(r=e[0],s):r,s.orient=(...e)=>e.length?(o=e[0],s):o,s};var Ie={red:"#c60",green:"#6c0",black:"#000",gray:"#ddd",darkGray:"#999"},Te=()=>{const e=Ae(),t=d.line().x((t,a)=>e.values(t,a).transposedX).y((t,a)=>e.values(t,a).transposedY),a=ce("path","line"),n=n=>{n.selection&&a.transition(n),t.defined(e.defined()),n.each((n,i,r)=>{const l=a(o.select(r[i]),[n]);l.enter().attr("fill","none").attr("stroke",Ie.black),l.attr("d",t),e.decorate()(l,n,i)})};return q(n,e,K("baseValue","bandwidth","align")),U(n,a,"key"),U(n,t,"curve"),n},_e=()=>{const e=Ae(),t=d.line().x((t,a)=>e.values(t,a).transposedX).y((t,a)=>e.values(t,a).transposedY),a=a=>{const n=t.context();n.beginPath(),t.defined(e.defined())(a),n.strokeStyle=Ie.black,n.fillStyle="transparent",e.decorate()(n,a),n.fill(),n.stroke(),n.closePath()};return q(a,e,K("baseValue","bandwidth","align")),U(a,t,"curve","context"),a},Ee=()=>{const e={},t={},a=(a,n,i)=>{Object.keys(e).forEach(t=>{e[t](a,n,t,i)}),Object.keys(t).forEach(e=>{t[e](a,n,e)})};return a.attribute=(...t)=>1===t.length?e[t[0]]:(e[t[0]]=t[1],a),a.uniform=(...e)=>1===e.length?t[e[0]]:(t[e[0]]=e[1],a),a},Pe=e=>{function t(e,t){switch(e){case Float32Array:return t.FLOAT;case Int8Array:return t.BYTE;case Int16Array:return t.SHORT;case Uint8Array:return t.UNSIGNED_BYTE;case Uint16Array:return t.UNSIGNED_SHORT;default:throw new Error(`Attribute buffer type ${e.name} not supported`);}}let a=null,n=null,i=e,r=!0,l=(e,r,l,o)=>{if(null!=a){const e=i.length/o;if(e!==a)throw Error(`Attribute buffer ${l} has incorrect number of elements `+`${e}, expected ${a}`)}const d=t(i.constructor,e);n=n||e.createBuffer();const s=e.getAttribLocation(r,l);e.bindBuffer(e.ARRAY_BUFFER,n),e.vertexAttribPointer(s,a||i.length/o,d,!1,0,0),e.enableVertexAttribArray(s),e.bufferData(e.ARRAY_BUFFER,i,e.DYNAMIC_DRAW)};const o=(e,t,a,n)=>{r&&(r=!1,l(e,t,a,n))};return o.bind=(...e)=>e.length?(l=e[0],o):l,o.components=(...e)=>e.length?(a=e[0],o):a,o.data=(...e)=>e.length?(i=e[0],r=!0,o):i,o},Be=e=>{let t=e,a=!0,n=(e,a,n)=>{const i=e.getUniformLocation(a,n);if(t instanceof Array)switch(t.length){case 1:e.uniform1fv(i,t);break;case 2:e.uniform2fv(i,t);break;case 3:e.uniform3fv(i,t);break;case 4:e.uniform4fv(i,t);break;default:throw new Error(`Uniform supports up to 4 elements. ${t.length} provided.`);}else e.uniform1f(i,t)};const i=(e,t,i)=>{a&&(a=!1,n(e,t,i))};return i.bind=(...e)=>e.length?(n=e[0],i):n,i.data=(...e)=>e.length?(t=e[0],a=!0,i):t,i},ze=e=>{function t(e,t){e.push(t)}function a(e,t,a){const n=e.indexOf(a);e.splice(0<=n?n:e.length,0,t)}function n(e,t){const a=e.indexOf(t);-1===a&&e.push(t)}const i=[],r=[],l=()=>e(i.join("\n"),r.join("\n"));return l.appendHeader=e=>(t(i,e),l),l.insertHeader=(e,t)=>(a(i,e,t),l),l.appendHeaderIfNotExists=e=>(n(i,e),l),l.appendBody=e=>(t(r,e),l),l.insertBody=(e,t)=>(a(r,e,t),l),l.appendBodyIfNotExists=e=>(n(r,e),l),l};const Ce=(e,t)=>`
precision mediump float;
float inf = 1.0 / 0.0;
${e}
void main() {
    ${t}
}`,Le=(e,t)=>`
precision mediump float;
${e}
void main() {
    gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);
    ${t}
}`;var De={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},Re=()=>{function e(e,t,a){if(!e)return!0;const i=n.getAttachedShaders(e),r=n.getShaderSource(i[0]),l=n.getShaderSource(i[1]);return t!==r||a!==l}function t(e,t){const i=a(e,n.VERTEX_SHADER),r=a(t,n.FRAGMENT_SHADER),l=n.createProgram();if(n.attachShader(l,i),n.attachShader(l,r),n.linkProgram(l),!n.getProgramParameter(l,n.LINK_STATUS)){const a=n.getProgramInfoLog(l);throw n.deleteProgram(l),new Error(`Failed to link program : ${a}
            Vertex Shader : ${e}
            Fragment Shader : ${t}`)}return l}function a(e,t){const a=n.createShader(t);if(n.shaderSource(a,e),n.compileShader(a),!n.getShaderParameter(a,n.COMPILE_STATUS)){const t=n.getShaderInfoLog(a);throw n.deleteShader(a),new Error(`Failed to compile shader : ${t}
            Shader : ${e}`)}return a}let n=null,i=null,r=null,l=null,o=De.TRIANGLES,d=Ee();const s=(a,s=0,c=a)=>{const h=r(),g=l();e(i,h,g)&&(n.isProgram(i)&&n.deleteProgram(i),i=t(h,g)),n.useProgram(i),d.uniform("uScreen",Be([n.canvas.width,n.canvas.height])),d(n,i,c),n.drawArrays(o,s,a)};return s.context=(...e)=>e.length?(n=e[0],s):n,s.buffers=(...e)=>e.length?(d=e[0],s):d,s.vertexShader=(...e)=>e.length?(r=e[0],s):r,s.fragmentShader=(...e)=>e.length?(l=e[0],s):l,s.mode=(...e)=>e.length?(o=e[0],s):o,s},Oe=()=>{let e=[0,1],t=[-1,1],a=0;const n=()=>{};return n.domain=(...t)=>t.length?(e=t[0],n):e,n.range=(...e)=>e.length?(t=e[0],n):t,n.coordinate=(...e)=>e.length?(a=e[0],n):a,n},He=()=>{function e(e){e.vertexShader().appendHeader(`uniform vec4 ${a()}Offset;`).appendHeader(`uniform vec4 ${a()}Scale;`),n.scaleComponent(e,"gl_Position")}const t=Oe(),a=()=>`linear${t.coordinate()}`,n=n=>{e(n);const i=t.domain()[1]-t.domain()[0],r=t.range()[1]-t.range()[0],l=t.range()[0]*(i/r)-t.domain()[0],o=[0,0,0,0],d=[1,1,1,1];o[t.coordinate()]=l,d[t.coordinate()]=r/i,n.buffers().uniform(`${a()}Offset`,Be(o)).uniform(`${a()}Scale`,Be(d))};return n.scaleComponent=(e,t)=>(e.vertexShader().appendBody(`${t} = ${t} + ${a()}Offset;`).appendBody(`${t} = ${t} * ${a()}Scale;`),n),q(n,t),n},Ne=()=>{function e(e,t){var a=Math.log10;return a(e)/a(t)}function t(e){e.vertexShader().appendHeader(`uniform vec4 ${i()}Offset;`).appendHeader(`uniform vec4 ${i()}Scale;`).appendHeader(`uniform vec4 ${i()}Include;`).appendHeader(`uniform float ${i()}Base;`),r.scaleComponent(e,"gl_Position")}const a=Oe();let n=10;const i=()=>`log${a.coordinate()}`,r=r=>{t(r);const l=e(a.domain()[1],n)-e(a.domain()[0],n),o=a.range()[1]-a.range()[0],d=o/l,s=a.range()[0]-d*e(a.domain()[0],n),c=[0,0,0,0],h=[0,0,0,0],g=[0,0,0,0];c[a.coordinate()]=s,h[a.coordinate()]=d,g[a.coordinate()]=1,r.buffers().uniform(`${i()}Offset`,Be(c)).uniform(`${i()}Scale`,Be(h)).uniform(`${i()}Include`,Be(g)).uniform(`${i()}Base`,Be(n))};return r.scaleComponent=(e,t)=>{const a=`${i()}Offset + (${i()}Scale * clamp(log(${t}) / log(${i()}Base), -inf, inf))`;return e.vertexShader().appendBody(`${t} = (${i()}Include * (${a})) + ((1.0 - ${i()}Include) * ${t});`),r},r.base=(...e)=>e.length?(n=e[0],r):n,q(r,a),r},We=()=>{function e(t,a){var e=Math.pow,n=Math.sign;return n(t)*e(G(t),a)}function t(e){e.vertexShader().appendHeader(`uniform vec4 ${i()}Offset;`).appendHeader(`uniform vec4 ${i()}Scale;`).appendHeader(`uniform vec4 ${i()}Include;`).appendHeader(`uniform float ${i()}Exp;`),r.scaleComponent(e,"gl_Position")}const a=Oe();let n=1;const i=()=>`pow${a.coordinate()}`,r=r=>{t(r);const l=e(a.domain()[1],n)-e(a.domain()[0],n),o=a.range()[1]-a.range()[0],d=o/l,s=a.range()[0]-d*e(a.domain()[0],n),c=[0,0,0,0],h=[0,0,0,0],g=[0,0,0,0];c[a.coordinate()]=s,h[a.coordinate()]=d,g[a.coordinate()]=1,r.buffers().uniform(`${i()}Offset`,Be(c)).uniform(`${i()}Scale`,Be(h)).uniform(`${i()}Include`,Be(g)).uniform(`${i()}Exp`,Be(n))};return r.scaleComponent=(e,t)=>{const a=`${i()}Offset + (${i()}Scale * sign(${t}) * pow(abs(gl_Position), vec4(${i()}Exp)))`;return e.vertexShader().appendBody(`${t} = (${i()}Include * (${a})) + ((1.0 - ${i()}Include) * ${t});`),r},r.exponent=(...e)=>e.length?(n=e[0],r):n,q(r,a),r},Ye=e=>{let t=M.scaleIdentity(),a=null;const n=e.copy.toString();return n===M.scaleLinear().copy.toString()?a=He().domain(e.domain()):n===M.scaleLog().copy.toString()?a=Ne().domain(e.domain()).base(e.base()):n===M.scalePow().copy.toString()?a=We().domain(e.domain()).exponent(e.exponent()):n===M.scaleTime().copy.toString()?a=He().domain(e.domain()):(a=He().domain(e.range()),t=e),{scale:t,glScale:a}};const Ge={header:`attribute vec4 aColor;
             varying vec4 vColor;`,body:`vColor = aColor;`},Me={header:`attribute float aXValue;
             attribute float aYValue;
             attribute float aSize;
             uniform float uLineWidth;
             varying float vSize;`,body:`vSize = 2.0 * sqrt(aSize / 3.14159);
           gl_PointSize = vSize + uLineWidth + 1.0;
           gl_Position = vec4(aXValue, aYValue, 0, 1);`},Fe={header:`attribute float aXValue;
        attribute float aYValue;
        attribute float aSize;
        uniform float uLineWidth;
        varying float vSize;`,body:`vSize = sqrt(aSize);
        gl_PointSize = vSize + uLineWidth + 1.0;
        gl_Position = vec4(aXValue, aYValue, 0, 1);`},Qe={header:`attribute float aXValue;
        attribute float aYValue;
        attribute float aSize;
        uniform float uLineWidth;
        varying float vSize;`,body:`vSize = sqrt((16.0 * aSize) / (3.0 * sqrt(3.0)));
        gl_PointSize = vSize + uLineWidth + 1.0;
        gl_Position = vec4(aXValue, aYValue, 0, 1);`},Ue={header:`attribute float aXValue;
        attribute float aYValue;
        attribute float aSize;
        uniform float uStrokeWidth;
        varying float vSize;
        varying float vStrokeWidthRatio;`,body:`vSize = 3.0 * sqrt(aSize / 5.0);
        vStrokeWidthRatio = uStrokeWidth / (vSize + uStrokeWidth + 1.0);
        gl_PointSize = vSize + uStrokeWidth + 1.0;
        gl_Position = vec4(aXValue, aYValue, 0, 1);`},Xe={header:`attribute float aXValue;
        attribute float aYValue;
        attribute float aXDirection;
        attribute float aYDirection;
        attribute float aBandwidth;
        attribute float aColorIndicator;
        varying float vColorIndicator;
        uniform vec2 uScreen;
        uniform float uLineWidth;`,body:`vColorIndicator = aColorIndicator;
    gl_Position = vec4(aXValue, aYValue, 0, 1);`},qe={header:`attribute float aXValue;
        attribute float aYValue;
        attribute float aWidthValue;
        attribute float aDirection;`,body:`gl_Position = vec4(aXValue, aYValue, 0, 1);
        vec4 origin = vec4(0.0, 0.0, 0.0, 0.0);
        vec4 width = vec4(aWidthValue, 0.0, 0.0, 0.0);
        gl_Position.x += (width.x - origin.x) / 2.0 * aDirection;`},je={header:`uniform float uLineWidth; // defines the width of the line
        uniform vec2 uScreen; // the screen space canvas size (for normalizing vectors)
        attribute vec2 aCorner; // defines which vertex in the line join we are considering
        attribute float aXValue; attribute float aYValue; // the current vertex positions
        attribute float aNextXValue; attribute float aNextYValue; // the next vertex positions
        attribute float aPrevXValue; attribute float aPrevYValue; // the previous vertex positions
        attribute float aDefined;
        varying float vDefined;`,body:`vDefined = aDefined;
        vec4 curr = vec4(aXValue, aYValue, 0, 1);
        gl_Position = curr;
        vec4 next = vec4(aNextXValue, aNextYValue, 0, 0);
        vec4 prev = vec4(aPrevXValue, aPrevYValue, 0, 0);`},Ke={body:`if (all(equal(gl_Position.xy, prev.xy))) {
            prev.xy = gl_Position.xy + normalize(gl_Position.xy - next.xy);
        }
        if (all(equal(gl_Position.xy, next.xy))) {
            next.xy = gl_Position.xy + normalize(gl_Position.xy - prev.xy);
        }
        vec2 A = normalize(normalize(gl_Position.xy - prev.xy) * uScreen);
        vec2 B = normalize(normalize(next.xy - gl_Position.xy) * uScreen);
        vec2 tangent = normalize(A + B);
        vec2 miter = vec2(-tangent.y, tangent.x);
        vec2 normalA = vec2(-A.y, A.x);
        float miterLength = 1.0 / dot(miter, normalA);
        vec2 point = normalize(A - B);
        if (miterLength > 10.0 && sign(aCorner.x * dot(miter, point)) > 0.0) {
            gl_Position.xy = gl_Position.xy - (aCorner.x * aCorner.y * uLineWidth * normalA) / uScreen.xy;
        } else {
            gl_Position.xy = gl_Position.xy + (aCorner.x * miter * uLineWidth * miterLength) / uScreen.xy;
        }`},Je={header:`attribute float aXValue;
        attribute float aYValue;
        attribute float aXDirection;
        attribute float aYDirection;
        attribute float aBandwidth;
        uniform vec2 uScreen;
        uniform float uLineWidth;`,body:`gl_Position = vec4(aXValue, aYValue, 0, 1);`},Ze={header:`attribute float aXValue;
        attribute float aYValue;
        attribute float aXPrevValue;
        attribute float aYPrevValue;
        attribute float aY0Value;
        attribute float aY0PrevValue;
        attribute vec3 aCorner;
        attribute float aDefined;
        varying float vDefined;
        
        float when_lt(float a, float b) {
            return max(sign(b - a), 0.0);
        }
        
        float and(float a, float b) {
            return a * b;
        }`,body:`vDefined = aDefined;
        gl_Position = vec4(0, 0, 0, 1);

        float hasIntercepted = when_lt((aYValue - aY0Value) * (aYPrevValue - aY0PrevValue), 0.0);
        float useIntercept = and(aCorner.z, hasIntercepted);
        
        float yGradient = (aYValue - aYPrevValue) / (aXValue - aXPrevValue);
        float yConstant = aYValue - (yGradient * aXValue);

        float y0Gradient = (aY0Value - aY0PrevValue) / (aXValue - aXPrevValue);
        float y0Constant = aY0Value - (y0Gradient * aXValue);

        float denominator = (yGradient - y0Gradient) + step(abs(yGradient - y0Gradient), 0.0);
        float interceptXValue = (y0Constant - yConstant) / denominator;
        float interceptYValue = (yGradient * interceptXValue) + yConstant;

        gl_Position = vec4(interceptXValue * useIntercept, interceptYValue * useIntercept, 0, 1);
        
        gl_Position.x += (1.0 - useIntercept) * ((aCorner.x * aXValue) + ((1.0 - aCorner.x) * aXPrevValue));
        gl_Position.y += (1.0 - useIntercept) * (1.0 - aCorner.y) * ((aCorner.x * aYValue) + ((1.0 - aCorner.x) * aYPrevValue));
        gl_Position.y += (1.0 - useIntercept) * aCorner.y * ((aCorner.x * aY0Value) + ((1.0 - aCorner.x) * aY0PrevValue));`},$e={header:`attribute float aXValue;
        attribute float aYValue;
        attribute float aXDirection;
        attribute float aYDirection;
        attribute float aBandwidth;
        uniform vec2 uScreen;
        uniform float uLineWidth;`,body:`gl_Position = vec4(aXValue, aYValue, 0, 1);`};var et=Object.freeze({scale:{header:`uniform vec2 uScale;`,body:`gl_Position.xy = gl_Position.xy * uScale;`},translate:{header:`uniform vec2 uTranslate;`,body:`gl_Position.xy = gl_Position.xy + uTranslate;`},multiColor:Ge,circle:Me,square:Fe,triangle:Qe,cross:Ue,rect:Xe,bar:qe,preScaleLine:je,postScaleLine:Ke,errorBar:Je,area:Ze,boxPlot:$e});const tt={header:`varying float vSize;`,body:`float distance = length(2.0 * gl_PointCoord - 1.0);
    if (distance > 1.0) {
        discard;
        return;
    }`},at={header:`varying float vSize;`,body:`vec2 pointCoordTransform = 2.0 * gl_PointCoord - 1.0;
        float distance = max(abs(pointCoordTransform.x), abs(pointCoordTransform.y));`},nt={header:`varying float vSize;`,body:`vec2 pointCoordTransform = 2.0 * gl_PointCoord - 1.0;
    float topEdgesDistance = abs(pointCoordTransform.x) - ((pointCoordTransform.y - 0.6) / sqrt(3.0));
    float bottomEdgeDistance = pointCoordTransform.y + 0.5;
    float distance = max(topEdgesDistance, bottomEdgeDistance);
    if (distance > 1.0) {
        discard;
    }`},it={header:`varying float vSize;
            varying float vStrokeWidthRatio;`,body:`vec2 pointCoordTransform = 2.0 * gl_PointCoord - 1.0;
    float innerCornerDistance = min(abs(pointCoordTransform.x), abs(pointCoordTransform.y)) + 0.66 - vStrokeWidthRatio;
    float outerEdgeDistance = max(abs(pointCoordTransform.x), abs(pointCoordTransform.y));
    float distance = max(innerCornerDistance, outerEdgeDistance);
    if (distance > 1.0) {
        discard;
    }`},rt={header:`varying float vColorIndicator;`,body:`gl_FragColor = vec4(0.4, 0.8, 0, 1);
    if (vColorIndicator < 0.0) {
        gl_FragColor = vec4(0.8, 0.4, 0, 1);
    }`},lt={header:`varying float vDefined;`,body:`if (vDefined < 0.5) {
            discard;
        }
        gl_FragColor = vec4(0.86, 0.86, 0.86, 1);`},ot={body:`gl_FragColor.a = gl_FragColor.a * (1.0 - smoothstep(vSize - 2.0, vSize, distance * vSize));`},dt={header:`varying vec4 vColor;`,body:`gl_FragColor = vColor;`},st={header:`uniform vec4 uColor;`,body:`gl_FragColor = uColor;`},ct={header:`uniform vec4 uEdgeColor;
             uniform float uLineWidth;`,body:`float sEdge = smoothstep(vSize - uLineWidth - 2.0, vSize - uLineWidth, distance * (vSize + uLineWidth));
           gl_FragColor = (uEdgeColor * sEdge) + ((1.0 - sEdge) * gl_FragColor);`},ht={header:`varying float vDefined;`,body:`if (vDefined < 0.5) {
        discard;
    }`};var gt=Object.freeze({circle:tt,square:at,triangle:nt,cross:it,rect:rt,area:lt,pointAlias:ot,multiColor:dt,seriesColor:st,pointEdge:ct,line:ht}),ut=()=>{const e=ze(Ce),t=ze(Le);return e.appendHeader(Me.header).appendBody(Me.body),t.appendHeader(tt.header).appendBody(tt.body),{vertex:()=>e,fragment:()=>t}},ft=()=>{const e=ze(Ce),t=ze(Le);return e.appendHeader(Fe.header).appendBody(Fe.body),t.appendHeader(at.header).appendBody(at.body),{vertex:()=>e,fragment:()=>t}},mt=()=>{const e=ze(Ce),t=ze(Le);return e.appendHeader(Qe.header).appendBody(Qe.body),t.appendHeader(nt.header).appendBody(nt.body),{vertex:()=>e,fragment:()=>t}},pt=()=>{const e=ze(Ce),t=ze(Le);return e.appendHeader(Ue.header).appendBody(Ue.body),t.appendHeader(it.header).appendBody(it.body),{vertex:()=>e,fragment:()=>t}},yt=e=>{switch(e){case F.symbolCircle:return ut();case F.symbolSquare:return ft();case F.symbolTriangle:return mt();case F.symbolCross:return pt();default:throw new Error(`Unrecognised symbol: ${e}`);}},bt=()=>{let e=1;const t=t=>{t.buffers().uniform("uLineWidth",Be(e))};return t.lineWidth=(...a)=>a.length?(e=a[0],t):e,t},xt=()=>{const e=Re();let t=Oe(),a=Oe(),n=ut(),i=()=>{};const r="aXValue",l="aYValue",o="aSize",d=r=>{e.vertexShader(n.vertex()).fragmentShader(n.fragment()).mode(De.POINTS),t.coordinate(0),t(e),a.coordinate(1),a(e),i(e),e(r)};return d.xValues=(...t)=>{const a=e.buffers().attribute(r);return a?a.data(t[0]):e.buffers().attribute(r,Pe(t[0]).components(1)),d},d.yValues=(...t)=>{const a=e.buffers().attribute(l);return a?a.data(t[0]):e.buffers().attribute(l,Pe(t[0]).components(1)),d},d.sizes=(...t)=>{const a=e.buffers().attribute(o);return a?a.data(t[0]):e.buffers().attribute(o,Pe(t[0]).components(1)),d},d.decorate=(...e)=>e.length?(i=e[0],d):i,d.xScale=(...e)=>e.length?(t=e[0],d):t,d.yScale=(...e)=>e.length?(a=e[0],d):a,d.type=(...e)=>e.length?(n=e[0],d):n,U(d,e,"context"),d},vt=()=>{const e=ze(Ce),t=ze(Le);return e.appendHeader(je.header).appendBody(je.body),t.appendHeader(ht.header).appendBody(ht.body),{vertex:()=>e,fragment:()=>t}},St=()=>{const e=Re();let t=Oe(),a=Oe(),n=()=>{};const i=bt(),r="aXValue",l="aYValue",o="aNextXValue",d="aNextYValue",s="aPrevXValue",c="aPrevYValue",h="aCorner",g="aDefined",u=r=>{const l=vt();e.vertexShader(l.vertex()).fragmentShader(l.fragment()).mode(De.TRIANGLE_STRIP),t.coordinate(0),t(e),a.coordinate(1),a(e),t.scaleComponent(e,"next"),a.scaleComponent(e,"next"),t.scaleComponent(e,"prev"),a.scaleComponent(e,"prev"),e.vertexShader().appendBody(Ke.body),e.buffers().uniform("uScreen",Be([e.context().canvas.width,e.context().canvas.height])),i(e),n(e),e(4*r)};return u.xValues=(...t)=>{const a=e.buffers().attribute(r),n=e.buffers().attribute(o),i=e.buffers().attribute(s),l=e.buffers().attribute(h);let d=new Float32Array(4*t[0].length);d=d.map((e,a)=>t[0][O(a/4)]);const c=new Float32Array(d),g=new Float32Array(d);c.copyWithin(0,4),g.copyWithin(4,0);let f=new Float32Array(8*t[0].length);const m=[-1,-1,1,-1,-1,1,1,1];return f=f.map((e,t)=>m[t%8]),a?(a.data(d),n.data(c),i.data(g),l.data(f)):(e.buffers().attribute(r,Pe(d)),e.buffers().attribute(o,Pe(c)),e.buffers().attribute(s,Pe(g)),e.buffers().attribute(h,Pe(f).components(2))),u},u.yValues=(...t)=>{const a=e.buffers().attribute(l),n=e.buffers().attribute(d),i=e.buffers().attribute(c);let r=new Float32Array(4*t[0].length);r=r.map((e,a)=>t[0][O(a/4)]);const o=new Float32Array(r),s=new Float32Array(r);return o.copyWithin(0,4),s.copyWithin(4,0),a?(a.data(r),n.data(o),i.data(s)):(e.buffers().attribute(l,Pe(r)),e.buffers().attribute(d,Pe(o)),e.buffers().attribute(c,Pe(s))),u},u.defined=(...t)=>{const a=e.buffers().attribute(g),n=new Float32Array(4*t[0].length),r=t[0];for(let e=0;e<r.length;e+=1){const t=r[e],a=0==e?t:r[e-1],i=e==r.length-1?t:r[e+1],l=4*e;n[l]=t?a:t,n[l+1]=t?a:t,n[l+2]=t?i:t,n[l+3]=t?i:t}return a?a.data(n):e.buffers().attribute(g,Pe(n).components(1)),u},u.decorate=(...e)=>e.length?(n=e[0],u):n,u.xScale=(...e)=>e.length?(t=e[0],u):t,u.yScale=(...e)=>e.length?(a=e[0],u):a,U(u,e,"context"),U(u,i,"lineWidth"),u},wt=()=>{const e=ze(Ce),t=ze(Le);return e.appendHeader(Xe.header).appendBody(Xe.body),t.appendHeader(rt.header).appendBody(rt.body),{vertex:()=>e,fragment:()=>t}},kt=()=>{const e=Re();let t=Oe(),a=Oe();const n=bt();let i=()=>{};const r="aXValue",l="aYValue",o="aXDirection",d="aYDirection",s="aBandwidth",c="aColorIndicator",h=[0,0,0,0,0,0,1,-1,-1,1,1,-1,-1,1,1,-1,-1,1],g=18,u=r=>{const l=wt();e.vertexShader(l.vertex()).fragmentShader(l.fragment()).mode(De.TRIANGLES),t.coordinate(0),t(e),a.coordinate(1),a(e),n(e),m(r),e.vertexShader().appendBody(`
        gl_Position.x += ((uLineWidth * aXDirection / 2.0) + (aBandwidth / 2.0)) / uScreen.x;
        gl_Position.y += (uLineWidth * aYDirection / 2.0) / uScreen.y;
      `),i(e),e(r*g)};u.xValues=(...t)=>{const a=e.buffers().attribute(r);let n=new Float32Array(t[0].length*g);n=n.map((e,a)=>t[0][O(a/g)]);const i=e.buffers().attribute(o);let l=new Float32Array(t[0].length*g);const d=[1,-1,-1,1,1,-1,0,0,-1,0,-1,-1,0,0,1,0,1,1];return l=l.map((e,t)=>d[t%g]),a?(a.data(n),i.data(l)):(e.buffers().attribute(r,Pe(n).components(1)),e.buffers().attribute(o,Pe(l).components(1))),u},u.open=(...e)=>(f(e[0],[6,7,8,9,10,11]),u),u.high=(...e)=>(f(e[0],[2,4,5]),u),u.low=(...e)=>(f(e[0],[0,1,3]),u),u.close=(...e)=>(f(e[0],[12,13,14,15,16,17]),u),u.bandwidth=(...t)=>{const a=e.buffers().attribute(s);let n=new Float32Array(t[0].length*g);return n=n.map((e,a)=>{if([8,10,11,14,16,17].includes(a%g)){const e=t[0][O(a/g)];return[8,10,11].includes(a%g)?-e:e}return e}),a?a.data(n):e.buffers().attribute(s,Pe(n).components(1)),u},u.decorate=(...e)=>e.length?(i=e[0],u):i,u.xScale=(...e)=>e.length?(t=e[0],u):t,u.yScale=(...e)=>e.length?(a=e[0],u):a;const f=(t,a)=>{const n=e.buffers().attribute(l),i=e.buffers().attribute(d);let r=new Float32Array(t.length*g),o=new Float32Array(t.length*g);if(n){const e=n.data();r=r.map((n,r)=>a.includes(r%g)?t[O(r/g)]:e[r]),n.data(r);const l=i.data();o=o.map((e,t)=>a.includes(t%g)?h[t%g]:l[t]),i.data(o)}else r=r.map((e,n)=>a.includes(n%g)?t[O(n/g)]:e),e.buffers().attribute(l,Pe(r).components(1)),o=o.map((e,t)=>a.includes(t%g)?h[t%g]:e),e.buffers().attribute(d,Pe(o).components(1))},m=t=>{const a=e.buffers().attribute(c);let n=new Float32Array(t*g);const r=e.buffers().attribute(l).data();n=n.map((e,t)=>{const a=O(t/g)*g,n=r[a+6],i=r[a+12];return n<i?1:-1}),a?a.data(n):e.buffers().attribute(c,Pe(n).components(1))};return U(u,e,"context"),U(u,n,"lineWidth"),u},Vt=()=>{const e=ze(Ce),t=ze(Le);return e.appendHeader(qe.header).appendBody(qe.body),{vertex:()=>e,fragment:()=>t}},At=()=>{const e=Re();let t=null,a=null,n=()=>{};const i="aXValue",r="aYValue",l="aWidthValue",o="aDirection",s=6,c=i=>{const r=Vt();e.vertexShader(r.vertex()).fragmentShader(r.fragment()).mode(De.TRIANGLES),t.coordinate(0),t(e),a.coordinate(1),a(e),t.scaleComponent(e,"origin"),t.scaleComponent(e,"width"),n(e),e(i*s)};return c.xScale=(...e)=>e.length?(t=e[0],c):t,c.yScale=(...e)=>e.length?(a=e[0],c):a,c.decorate=(...e)=>e.length?(n=e[0],c):n,c.xValues=(...t)=>{const a=e.buffers().attribute(i);let n=new Float32Array(t[0].length*s);n=n.map((e,a)=>t[0][O(a/s)]);const r=e.buffers().attribute(o);let l=new Float32Array(t[0].length*s);return l=l.map((e,t)=>[0,1,3].includes(t%s)?-1:1),a?(a.data(n),r.data(l)):(e.buffers().attribute(i,Pe(n).components(1)),e.buffers().attribute(o,Pe(l).components(1))),c},c.y0Values=(...t)=>{const a=e.buffers().attribute(r);if(a){const e=a.data();let n=new Float32Array(e.length);n=n.map((a,n)=>[1,2,4].includes(n%s)?t[0][O(n/s)]:e[n]),a.data(n)}else{let a=new Float32Array(t[0].length*s);a=a.map((e,a)=>[1,2,4].includes(a%s)?t[0][O(a/s)]:e),e.buffers().attribute(r,Pe(a).components(1))}return c},c.y1Values=(...t)=>{const a=e.buffers().attribute(r);if(a){const e=a.data();let n=new Float32Array(e.length);n=n.map((a,n)=>[0,3,5].includes(n%s)?t[0][O(n/s)]:e[n]),a.data(n)}else{let a=new Float32Array(t[0].length*s);a=a.map((e,a)=>[0,3,5].includes(a%s)?t[0][O(a/s)]:e),e.buffers().attribute(r,Pe(a).components(1))}return c},c.widths=(...t)=>{const a=e.buffers().attribute(l);let n=new Float32Array(t[0].length*s);return n=n.map((e,a)=>t[0][O(a/s)]),a?a.data(n):e.buffers().attribute(l,Pe(n).components(1)),c},U(c,e,"context"),c},It=()=>{const e=ze(Ce),t=ze(Le);return e.appendHeader(Je.header).appendBody(Je.body),{vertex:()=>e,fragment:()=>t}},Tt=()=>{const e=Re();let t=Oe(),a=Oe();const n=bt(),i="aXValue",r="aYValue",l="aXDirection",o="aYDirection",d="aBandwidth",s=[0,0,0,0,0,0,1,-1,-1,1,1,-1,-1,1,1,-1,-1,1],c=18,h=i=>{const r=It();e.vertexShader(r.vertex()).fragmentShader(r.fragment()).mode(De.TRIANGLES),t.coordinate(0),t(e),a.coordinate(1),a(e),n(e),e.vertexShader().appendBody(`
                gl_Position.x += ((uLineWidth * aXDirection) + aBandwidth) / uScreen.x;
                gl_Position.y += (uLineWidth * aYDirection) / uScreen.y;
            `),e(i*c)};h.xValues=(...t)=>{const a=e.buffers().attribute(i);let n=new Float32Array(t[0].length*c);n=n.map((e,a)=>t[0][O(a/c)]);const r=e.buffers().attribute(l);let o=new Float32Array(t[0].length*c);const d=[1,-1,-1,1,1,-1,1,1,-1,1,-1,-1,-1,-1,1,-1,1,1];return o=o.map((e,t)=>d[t%c]),a?(a.data(n),r.data(o)):(e.buffers().attribute(i,Pe(n).components(1)),e.buffers().attribute(l,Pe(o).components(1))),h},h.high=(...e)=>(g(e[0],[2,4,5,6,7,8,9,10,11]),h),h.low=(...e)=>(g(e[0],[0,1,3,12,13,14,15,16,17]),h),h.bandwidth=(...t)=>{const a=e.buffers().attribute(d);let n=new Float32Array(t[0].length*c);return n=n.map((e,a)=>{if(5<a%c){const e=t[0][O(a/c)];return[8,10,11,12,13,15].includes(a%c)?-e:e}return e}),a?a.data(n):e.buffers().attribute(d,Pe(n).components(1)),h},h.xScale=(...e)=>e.length?(t=e[0],h):t,h.yScale=(...e)=>e.length?(a=e[0],h):a;const g=(t,a)=>{const n=e.buffers().attribute(r),i=e.buffers().attribute(o);let l=new Float32Array(t.length*c),d=new Float32Array(t.length*c);if(n){const e=n.data();l=l.map((n,r)=>a.includes(r%c)?t[O(r/c)]:e[r]),n.data(l);const r=i.data();d=d.map((e,t)=>a.includes(t%c)?s[t%c]:r[t]),i.data(d)}else l=l.map((e,n)=>a.includes(n%c)?t[O(n/c)]:e),e.buffers().attribute(r,Pe(l).components(1)),d=d.map((e,t)=>a.includes(t%c)?s[t%c]:e),e.buffers().attribute(o,Pe(d).components(1))};return U(h,e,"context"),U(h,n,"lineWidth"),h},_t=()=>{const e=ze(Ce),t=ze(Le);return e.appendHeader(Ze.header).appendBody(Ze.body),t.appendHeader(lt.header).appendBody(lt.body),{vertex:()=>e,fragment:()=>t}},Et=()=>{const e=Re();let t=Oe(),a=Oe(),n=()=>{};const i="aXValue",r="aXPrevValue",l="aYValue",o="aYPrevValue",d="aY0Value",s="aY0PrevValue",c="aCorner",h="aDefined",g=6,u=i=>{const r=_t();e.vertexShader(r.vertex()).fragmentShader(r.fragment()).mode(De.TRIANGLES),t.coordinate(0),t(e),a.coordinate(1),a(e),n(e),e((i-1)*g)};return u.xValues=(...t)=>{const a=e.buffers().attribute(i),n=e.buffers().attribute(r),l=e.buffers().attribute(c);let o=new Float32Array((t[0].length-1)*g),d=new Float32Array((t[0].length-1)*g),s=new Float32Array(3*((t[0].length-1)*g));o=o.map((e,a)=>t[0][O((a+g)/g)]),d=d.map((e,a)=>t[0][O(a/g)]);const h=[0,0,0,0,1,0,1,1,1,0,0,1,1,0,0,1,1,0];return s=s.map((e,t)=>h[t%(3*g)]),a?(a.data(o),n.data(d),l.data(s)):(e.buffers().attribute(i,Pe(o).components(1)),e.buffers().attribute(r,Pe(d).components(1)),e.buffers().attribute(c,Pe(s).components(3))),u},u.yValues=(...t)=>{const a=e.buffers().attribute(l),n=e.buffers().attribute(o);let i=new Float32Array((t[0].length-1)*g),r=new Float32Array((t[0].length-1)*g);return i=i.map((e,a)=>t[0][O((a+g)/g)]),r=r.map((e,a)=>t[0][O(a/g)]),a?(a.data(i),n.data(r)):(e.buffers().attribute(l,Pe(i).components(1)),e.buffers().attribute(o,Pe(r).components(1))),u},u.y0Values=(...t)=>{const a=e.buffers().attribute(d),n=e.buffers().attribute(s);let i=new Float32Array((t[0].length-1)*g),r=new Float32Array((t[0].length-1)*g);return i=i.map((e,a)=>t[0][O((a+g)/g)]),r=r.map((e,a)=>t[0][O(a/g)]),a?(a.data(i),n.data(r)):(e.buffers().attribute(d,Pe(i).components(1)),e.buffers().attribute(s,Pe(r).components(1))),u},u.defined=(...t)=>{const a=e.buffers().attribute(h),n=new Float32Array((t[0].length-1)*g),r=t[0];for(let e=0;e<r.length-1;e+=1){const t=e*g,a=r[e]?r[e+1]:r[e];n[t]=n[t+1]=n[t+2]=n[t+3]=n[t+4]=n[t+5]=a}return a?a.data(n):e.buffers().attribute(h,Pe(n).components(1)),u},u.decorate=(...e)=>e.length?(n=e[0],u):n,u.xScale=(...e)=>e.length?(t=e[0],u):t,u.yScale=(...e)=>e.length?(a=e[0],u):a,U(u,e,"context"),u},Pt=()=>{const e=Re();let t=Oe(),a=Oe();const n=bt();let i=()=>{};const r="aXValue",l="aYValue",o="aXDirection",d="aYDirection",s="aBandwidth",c="aColorIndicator",h=12,g=r=>{const l=wt();e.vertexShader(l.vertex()).fragmentShader(l.fragment()).mode(De.TRIANGLES),t.coordinate(0),t(e),a.coordinate(1),a(e),n(e),f(r),m(r),e.vertexShader().appendBody(`
        gl_Position.x += ((uLineWidth * aXDirection / 2.0) + (aBandwidth / 2.0)) / uScreen.x;
        gl_Position.y += (uLineWidth * aYDirection / 2.0) / uScreen.y;
      `),i(e),e(r*h)};g.xValues=(...t)=>{const a=e.buffers().attribute(r);let n=new Float32Array(t[0].length*h);n=n.map((e,a)=>t[0][O(a/h)]);const i=e.buffers().attribute(o);let l=new Float32Array(t[0].length*h);const d=[1,-1,-1,1,1,-1,1,-1,-1,1,1,-1];return l=l.map((e,t)=>d[t%h]),a?(a.data(n),i.data(l)):(e.buffers().attribute(r,Pe(n).components(1)),e.buffers().attribute(o,Pe(l).components(1))),g},g.open=(...e)=>(u(e[0],[6,7,9]),g),g.high=(...e)=>(u(e[0],[2,4,5]),g),g.low=(...e)=>(u(e[0],[0,1,3]),g),g.close=(...e)=>(u(e[0],[8,10,11]),g),g.bandwidth=(...t)=>{const a=e.buffers().attribute(s);let n=new Float32Array(t[0].length*h);return n=n.map((e,a)=>{if([6,7,8,9,10,11].includes(a%h)){const e=t[0][O(a/h)];return[6,9,10].includes(a%h)?e:-e}return e}),a?a.data(n):e.buffers().attribute(s,Pe(n).components(1)),g},g.decorate=(...e)=>e.length?(i=e[0],g):i,g.xScale=(...e)=>e.length?(t=e[0],g):t,g.yScale=(...e)=>e.length?(a=e[0],g):a;const u=(t,a)=>{const n=e.buffers().attribute(l);let i=new Float32Array(t.length*h);if(n){const e=n.data();i=i.map((n,r)=>a.includes(r%h)?t[O(r/h)]:e[r]),n.data(i)}else i=i.map((e,n)=>a.includes(n%h)?t[O(n/h)]:e),e.buffers().attribute(l,Pe(i).components(1))},f=t=>{const a=e.buffers().attribute(c);let n=new Float32Array(t*h);const r=e.buffers().attribute(l).data();n=n.map((e,t)=>{const a=O(t/h)*h,n=r[a+7],i=r[a+8];return n<i?1:-1}),a?a.data(n):e.buffers().attribute(c,Pe(n).components(1))},m=t=>{const a=e.buffers().attribute(d);let n=new Float32Array(t*h);const r=e.buffers().attribute(l).data();n=n.map((e,t)=>{const a=O(t/h)*h,n=r[a+7],i=r[a+8];if([6,7,8,9,10,11].includes(t%h)){const e=H(n,i)===n;return[6,7,9].includes(t%a)?e?-1:1:e?1:-1}return 0}),a?a.data(n):e.buffers().attribute(d,Pe(n).components(1))};return U(g,e,"context"),U(g,n,"lineWidth"),g},Bt=()=>{const e=ze(Ce),t=ze(Le);return e.appendHeader($e.header).appendBody($e.body),{vertex:()=>e,fragment:()=>t}},zt=()=>{const e=Re();let t=Oe(),a=Oe();const n=bt(),i="aXValue",r="aYValue",l="aXDirection",o="aYDirection",d="aBandwidth",s=[1,1,-1,1,-1,-1,-1,-1,1,-1,1,1,1,1,-1,1,-1,-1,1,1,-1,1,-1,-1,1,1,-1,1,-1,-1,1,1,-1,1,-1,-1,1,1,-1,1,-1,-1,-1,-1,1,-1,1,1,1,1,-1,1,-1,-1],c=54,h=i=>{const r=Bt();e.vertexShader(r.vertex()).fragmentShader(r.fragment()).mode(De.TRIANGLES),t.coordinate(0),t(e),a.coordinate(1),a(e),n(e),e.vertexShader().appendBody(`
                gl_Position.x += ((uLineWidth * aXDirection) + aBandwidth) / uScreen.x;
                gl_Position.y += (uLineWidth * aYDirection) / uScreen.y;
            `),e(i*c)};h.xValues=(...t)=>{const a=e.buffers().attribute(i);let n=new Float32Array(t[0].length*c);n=n.map((e,a)=>t[0][O(a/c)]);const r=e.buffers().attribute(l);let o=new Float32Array(t[0].length*c);const d=[0,0,0,0,0,0,-1,1,1,-1,-1,1,1,-1,-1,1,1,-1,1,-1,-1,1,1,-1,1,-1,-1,1,1,-1,-1,1,1,-1,-1,1,-1,1,1,-1,-1,1,-1,1,1,-1,-1,1,0,0,0,0,0,0];return o=o.map((e,t)=>d[t%c]),a?(a.data(n),r.data(o)):(e.buffers().attribute(i,Pe(n).components(1)),e.buffers().attribute(l,Pe(o).components(1))),h},h.medianValues=(...e)=>(g(e[0],[18,19,20,21,22,23]),h),h.upperQuartileValues=(...e)=>(g(e[0],[8,10,11,12,13,14,15,16,17,30,31,33,36,37,39]),h),h.lowerQuartileValues=(...e)=>(g(e[0],[24,25,26,27,28,29,32,34,35,38,40,41,42,43,45]),h),h.highValues=(...e)=>(g(e[0],[0,1,2,3,4,5,6,7,9]),h),h.lowValues=(...e)=>(g(e[0],[44,46,47,48,49,50,51,52,53]),h),h.bandwidth=(...t)=>{const a=e.buffers().attribute(d);let n=new Float32Array(t[0].length*c);if(a){const e=a.data();n=n.map((a,n)=>{if(11<n%c&&42>n%c){const e=t[0][O(n/c)];return[12,15,16,18,21,22,24,27,28,30,31,32,33,34,35].includes(n%c)?-e:e}return e[n]}),a.data(n)}else n=n.map((e,a)=>{if(11<a%c&&42>a%c){const e=t[0][O(a/c)];return[12,15,16,18,21,22,24,27,28,30,31,32,33,34,35].includes(a%c)?-e:e}return e}),e.buffers().attribute(d,Pe(n).components(1));return h},h.capWidth=(...t)=>{const a=e.buffers().attribute(d);let n=new Float32Array(t[0].length*c);if(a){const e=a.data();n=n.map((a,n)=>{if(5>=n%c||48<=n%c){const e=t[0][O(n/c)];return[0,3,4,48,51,52].includes(n%c)?-e:e}return e[n]}),a.data(n)}else n=n.map((e,a)=>{if(5>=a%c||48<=a%c){const e=t[0][O(a/c)];return[0,3,4,48,51,52].includes(a%c)?-e:e}return e}),e.buffers().attribute(d,Pe(n).components(1));return h},h.xScale=(...e)=>e.length?(t=e[0],h):t,h.yScale=(...e)=>e.length?(a=e[0],h):a;const g=(t,a)=>{const n=e.buffers().attribute(r),i=e.buffers().attribute(o);let l=new Float32Array(t.length*c),d=new Float32Array(t.length*c);if(n){const e=n.data();l=l.map((n,r)=>a.includes(r%c)?t[O(r/c)]:e[r]),n.data(l);const r=i.data();d=d.map((e,t)=>a.includes(t%c)?s[t%c]:r[t]),i.data(d)}else l=l.map((e,n)=>a.includes(n%c)?t[O(n/c)]:e),e.buffers().attribute(r,Pe(l).components(1)),d=d.map((e,t)=>a.includes(t%c)?s[t%c]:e),e.buffers().attribute(o,Pe(d).components(1))};return U(h,e,"context"),U(h,n,"lineWidth"),h},Ct=()=>{const e=d.symbol(),t=Ae(),a=ce("g","point"),n=e=>"translate("+e[0]+", "+e[1]+")",i=i=>{i.selection&&a.transition(i),i.each((i,r,l)=>{const d=i.filter(t.defined()),s=a(o.select(l[r]),d);s.enter().attr("transform",(e,a)=>n(t.values(e,a).origin)).attr("fill",Ie.gray).attr("stroke",Ie.black).append("path"),s.attr("transform",(e,a)=>n(t.values(e,a).origin)).select("path").attr("d",e),t.decorate()(s,i,r)})};return q(i,t,K("baseValue","bandwidth","align")),U(i,a,"key"),U(i,e,"type","size"),i},Lt=()=>{const e=d.symbol(),t=Ae(),a=a=>{const n=a.filter(t.defined()),r=e.context();n.forEach((a,n)=>{r.save();const i=t.values(a,n);r.translate(i.origin[0],i.origin[1]),r.beginPath(),e(a,n),r.strokeStyle=Ie.black,r.fillStyle=Ie.gray,t.decorate()(r,a,n),r.fill(),r.stroke(),r.closePath(),r.restore()})};return q(a,t,K("baseValue","bandwidth","align")),U(a,e,"size","type","context"),a},Dt=()=>{let e=e=>e.high,t=e=>e.low,n=e=>e.cross,r="vertical",l="center",o=()=>5;const s=Ve({decorate:()=>{},defined:(a,r)=>D(t,e,n)(a,r),xScale:a.scaleIdentity(),yScale:a.scaleIdentity()});return s.values=(a,d)=>{const i=o(a,d),c=ke(l,i),h=s.xScale(),g=s.yScale();if("vertical"===r){const r=g(e(a,d));return{origin:[h(n(a,d))+c,r],high:0,low:g(t(a,d))-r,width:i}}else{const r=h(t(a,d));return{origin:[r,g(n(a,d))+c],high:h(e(a,d))-r,low:0,width:i}}},s.xValues=()=>"vertical"===r?[n]:[e,t],s.yValues=()=>"vertical"===r?[e,t]:[n],s.orient=(...e)=>e.length?(r=e[0],s):r,s.lowValue=(...e)=>e.length?(t=we(e[0]),s):t,s.highValue=(...t)=>t.length?(e=we(t[0]),s):e,s.crossValue=(...e)=>e.length?(n=we(e[0]),s):n,s.bandwidth=(...e)=>e.length?(o=we(e[0]),s):o,s.align=(...e)=>e.length?(l=e[0],s):l,s},Rt=()=>{let e,t=e=>e.date,n=e=>e.open,r=e=>e.high,l=e=>e.low,o=e=>e.close,s=()=>5,c="center",h=(a,n)=>e.xScale()(t(a,n));return e=Ve({decorate:()=>{},defined:(e,a)=>D(t,n,l,r,o)(e,a),xScale:a.scaleIdentity(),yScale:a.scaleIdentity()}),e.values=(t,a)=>{const i=o(t,a),d=n(t,a),g=s(t,a),u=ke(c,g);let f="";return i>d?f="up":i<d&&(f="down"),{cross:h(t,a)+u,open:e.yScale()(d),high:e.yScale()(r(t,a)),low:e.yScale()(l(t,a)),close:e.yScale()(i),width:g,direction:f}},e.xValues=()=>[t],e.yValues=()=>[n,r,l,o],e.crossValue=(...a)=>a.length?(t=a[0],e):t,e.openValue=(...t)=>t.length?(n=t[0],e):n,e.highValue=(...t)=>t.length?(r=t[0],e):r,e.lowValue=(...t)=>t.length?(l=t[0],e):l,e.yValue=e.closeValue=(...t)=>t.length?(o=t[0],e):o,e.bandwidth=(...t)=>t.length?(s=we(t[0]),e):s,e.align=(...t)=>t.length?(c=t[0],e):c,e},Ot=(e,t)=>{const a=Rt(),n=ce("g",t),r=e=>"translate("+e.cross+", "+e.high+")",l=e=>t=>e.selection?t.transition(e):t,d=i=>{i.selection&&n.transition(i);const s=l(i);i.each((i,l,d)=>{const c=i.filter(a.defined()),h=n(o.select(d[l]),c);h.enter().attr("transform",(e,t)=>r(a.values(e,t))+" scale(1e-6, 1)").append("path"),h.each((n,l,i)=>{const d=a.values(n,l),c="up"===d.direction?Ie.green:Ie.red,h=s(o.select(i[l])).attr("class",t+" "+d.direction).attr("stroke",c).attr("fill",c).attr("transform",()=>r(d)+" scale(1)");e.x(0).width(d.width).open(()=>d.open-d.high).high(0).low(()=>d.low-d.high).close(()=>d.close-d.high),h.select("path").attr("d",e([n]))}),a.decorate()(h,i,l)})};return U(d,n,"key"),q(d,a),d},Ht=e=>{const t=Rt(),a=a=>{const n=a.filter(t.defined()),r=e.context();n.forEach((a,n)=>{r.save();const i=t.values(a,n);r.translate(i.cross,i.high),r.beginPath(),e.x(0).open(()=>i.open-i.high).width(i.width).high(0).low(()=>i.low-i.high).close(()=>i.close-i.high)([a]);const l="up"===i.direction?Ie.green:Ie.red;r.strokeStyle=l,r.fillStyle=l,t.decorate()(r,a,n),r.fill(),r.stroke(),r.closePath(),r.restore()})};return U(a,e,"context"),q(a,t),a},Nt=e=>{const t=Rt(),a=a=>{const n=a.filter(t.defined()),r=Ye(t.xScale()),l=Ye(t.yScale()),o=new Float32Array(n.length),s=new Float32Array(n.length),c=new Float32Array(n.length),h=new Float32Array(n.length),g=new Float32Array(n.length),u=new Float32Array(n.length);n.forEach((e,a)=>{o[a]=r.scale(t.crossValue()(e,a)),s[a]=l.scale(t.openValue()(e,a)),c[a]=l.scale(t.highValue()(e,a)),h[a]=l.scale(t.lowValue()(e,a)),g[a]=l.scale(t.closeValue()(e,a)),u[a]=t.bandwidth()(e,a)}),e.xValues(o).open(s).high(c).low(h).close(g).bandwidth(u).xScale(r.glScale).yScale(l.glScale).decorate(e=>t.decorate()(e,n,0)),e(n.length)};return q(a,t,K("align")),U(a,e,"context","lineWidth"),a},Wt=()=>{let e=e=>e.upperQuartile,t=e=>e.lowerQuartile,n=e=>e.high,r=e=>e.low,l=e=>e.value,o=e=>e.median,s="vertical",c="center",h=()=>5;const g=Ve({decorate:()=>{},defined:(a,d)=>D(r,n,t,e,l,o)(a,d),xScale:a.scaleIdentity(),yScale:a.scaleIdentity()});return g.values=(a,d)=>{const i=h(a,d),u=ke(c,i),f=g.xScale(),m=g.yScale();if("vertical"===s){const s=m(n(a,d));return{origin:[f(l(a,d))+u,s],high:0,upperQuartile:m(e(a,d))-s,median:m(o(a,d))-s,lowerQuartile:m(t(a,d))-s,low:m(r(a,d))-s,width:i}}else{const s=f(r(a,d));return{origin:[s,m(l(a,d))+u],high:f(n(a,d))-s,upperQuartile:f(e(a,d))-s,median:f(o(a,d))-s,lowerQuartile:f(t(a,d))-s,low:0,width:i}}},g.xValues=()=>"vertical"===s?[l]:[e,t,n,r,o],g.yValues=()=>"vertical"===s?[e,t,n,r,o]:[l],g.orient=(...e)=>e.length?(s=e[0],g):s,g.lowerQuartileValue=(...e)=>e.length?(t=we(e[0]),g):t,g.upperQuartileValue=(...t)=>t.length?(e=we(t[0]),g):e,g.lowValue=(...e)=>e.length?(r=we(e[0]),g):r,g.highValue=(...e)=>e.length?(n=we(e[0]),g):n,g.crossValue=(...e)=>e.length?(l=we(e[0]),g):l,g.medianValue=(...e)=>e.length?(o=we(e[0]),g):o,g.bandwidth=(...e)=>e.length?(h=we(e[0]),g):h,g.align=(...e)=>e.length?(c=e[0],g):c,g},Yt=()=>{let e=[],t=e=>e,n=(e,t)=>t;const i=Ve({decorate:()=>{},xScale:a.scaleIdentity(),yScale:a.scaleIdentity()});return i.xValues=()=>e.map(e=>e.xValues()).reduce((e,t)=>e.concat(t)),i.yValues=()=>e.map(e=>e.yValues()).reduce((e,t)=>e.concat(t)),i.mapping=(...e)=>e.length?(t=e[0],i):t,i.key=(...e)=>e.length?(n=e[0],i):n,i.series=(...t)=>t.length?(e=t[0],i):e,i},Gt=()=>{const e=Yt(),t=ce("g"),a=ce("g","multi"),n=n=>{n.selection&&(a.transition(n),t.transition(n));const i=e.mapping(),r=e.series(),l=e.xScale(),d=e.yScale();n.each((n,s,c)=>{const h=a(o.select(c[s]),r);h.each((e,a,s)=>{e.xScale(l).yScale(d);const c=i(n,a,r),h=t(o.select(s[a]),[c]);h.call(e)});const g=h.selection?h.selection():h;g.order(),e.decorate()(h,n,s)})};return q(n,e),U(n,a,"key"),n},Mt=()=>{let e=null;const t=Yt(),a=a=>{const n=t.mapping(),i=t.series(),r=t.xScale(),l=t.yScale();i.forEach((o,s)=>{const c=n(a,s,i);o.context(e).xScale(r).yScale(l);let h;o.decorate?(h=o.decorate(),o.decorate((e,n,r)=>{t.decorate()(e,a,s),h(e,n,r)})):t.decorate()(e,a,s),o(c),h&&o.decorate(h)})};return a.context=(...t)=>t.length?(e=t[0],a):e,q(a,t),a},Ft=()=>{let e=()=>50,n="center";const r=a.scaleBand(),l=Ve({decorate:()=>{},xScale:a.scaleLinear(),yScale:a.scaleLinear()});return l.offsetScaleForDatum=(a,l,o)=>{const i=e(l,o),d=ke(n,i),s=i/2;return r.domain(t.range(0,a.length)).range([-s+d,s+d])},l.bandwidth=(...t)=>t.length?(e=we(t[0]),l):e,l.align=(...e)=>e.length?(n=e[0],l):n,q(l,r,Z({paddingInner:"paddingOuter"})),l},Qt=()=>{let e="vertical",t=_e();const a=Mt(),n=n=>{"vertical"===e?a.series(n[0].map(()=>t)).mapping((e,t)=>e.map(e=>e[t])):a.series(n.map(()=>t)).mapping((e,t)=>e[t]),a(n)};return n.series=(...e)=>e.length?(t=e[0],n):t,n.orient=(...t)=>t.length?(e=t[0],n):e,q(n,a,K("series","mapping")),n};const Ut=e=>e.sort(t.ascending).filter((e,t,a)=>-1===a.indexOf(e,t+1));var Xt=()=>{let e=e=>e.x,n=e=>e.y,r=e=>e.color,l=()=>5,o=()=>5,d=a.interpolateViridis;const s=Ve({decorate:()=>{},defined:(t,a)=>D(e,n,r)(t,a),xScale:a.scaleIdentity(),yScale:a.scaleIdentity()});return s.pathGenerator=ie().x(0).y(0),s.colorScale=e=>{const n=e.map(r);return a.scaleLinear().domain([t.min(n),t.max(n)])},s.values=(t,a)=>({x:s.xScale()(e(t,a)),y:s.yScale()(n(t,a)),colorValue:r(t,a),width:o(t,a),height:l(t,a)}),s.xValues=()=>[e],s.yValues=()=>[n],s.xValue=(...t)=>t.length?(e=we(t[0]),s):e,s.yValue=(...e)=>e.length?(n=we(e[0]),s):n,s.colorValue=(...e)=>e.length?(r=we(e[0]),s):r,s.colorInterpolate=(...e)=>e.length?(d=e[0],s):d,s.xBandwidth=(...e)=>e.length?(o=we(e[0]),s):o,s.yBandwidth=(...e)=>e.length?(l=we(e[0]),s):l,q(s,s.pathGenerator,Z({horizontalAlign:"xAlign",verticalAlign:"yAlign"})),s},qt=e=>"function"==typeof e?e:()=>e,jt=()=>{let e=a.scaleIdentity(),t=a.scaleIdentity(),n=e=>e,i=n,r=()=>{},l="horizontal";const d=ce("g","annotation-line"),s=a=>{if(a.selection&&d.transition(a),"horizontal"!==l&&"vertical"!==l)throw new Error("Invalid orientation");const s="horizontal"===l,c=s?(e,t)=>`translate(${e}, ${t})`:(e,t)=>`translate(${t}, ${e})`,h=s?"x2":"y2",g=s?e:t,u=s?t:e,f=s?"left-handle":"bottom-handle",m=s?"right-handle":"top-handle",p=s?"9":"0",y=s?"0":"9",b=s?"0.32em":"0.71em",x=s?"start":"middle",v=g.range(),S=(...e)=>c(v[0],u(n(...e))),w=v[1]-v[0];a.each((e,t,a)=>{const n=d(o.select(a[t]),e),s=n.enter().attr("transform",S).style("stroke","#bbb");s.append("line").attr(h,w),s.append("g").classed(f,!0).style("stroke","none"),s.append("g").classed(m,!0).style("stroke","none").attr("transform",c(w,0)).append("text").attr("text-anchor",x).attr("x",p).attr("y",y).attr("dy",b),n.attr("class",`annotation-line ${l}`),n.attr("transform",S),n.select("line").attr(h,w),n.select("g."+m).attr("transform",c(w,0)),n.select("text").text(i),r(n,e,t)})};return s.xScale=(...t)=>t.length?(e=t[0],s):e,s.yScale=(...e)=>e.length?(t=e[0],s):t,s.value=(...e)=>e.length?(n=qt(e[0]),s):n,s.label=(...e)=>e.length?(i=qt(e[0]),s):i,s.decorate=(...e)=>e.length?(r=e[0],s):r,s.orient=(...e)=>e.length?(l=e[0],s):l,s},Kt=()=>{let e=a.scaleIdentity(),t=a.scaleIdentity(),n=e=>e,r=n,l=()=>{},o="horizontal";const s=d.line(),c=a=>{if("horizontal"!==o&&"vertical"!==o)throw new Error("Invalid orientation");const c="horizontal"===o,h=s.context(),g=c?e:t,u=c?t:e,f=g.domain(),m=c?9:0,p=c?0:9,b=c?"left":"center",v=c?"middle":"hanging";a.forEach((e,t)=>{h.save(),h.beginPath(),h.strokeStyle="#bbb",h.fillStyle="#000",h.textAlign=b,h.textBaseline=v,l(h,e,t),s.context(h)(f.map(t=>{const a=[g(t),u(n(e))];return c?a:a.reverse()}));const a=c?g(f[1]):u(n(e)),i=c?u(n(e)):g(f[1]);h.fillText(r(e),a+m,i+p),h.fill(),h.stroke(),h.closePath(),h.restore()})};return c.xScale=(...t)=>t.length?(e=t[0],c):e,c.yScale=(...e)=>e.length?(t=e[0],c):t,c.value=(...e)=>e.length?(n=qt(e[0]),c):n,c.label=(...e)=>e.length?(r=qt(e[0]),c):r,c.decorate=(...e)=>e.length?(l=e[0],c):l,c.orient=(...e)=>e.length?(o=e[0],c):o,U(c,s,"context"),c},Jt=()=>{let e=a.scaleIdentity(),t=[10],n=null;const i=()=>null==n?e.ticks?e.ticks(...t):e.domain():n;return i.scale=(...t)=>t.length?(e=t[0],i):e,i.ticks=(...e)=>(t=e,i),i.tickArguments=(...e)=>e.length?(t=e[0],i):t,i.tickValues=(...e)=>e.length?(n=e[0],i):n,i};const Zt=e=>e;const $t=e=>e,ea=(e,t,a={})=>{let n=[10],i=null,r=()=>{},l=null,s=6,c=6,h=3;const u=d.line(),f=ce("g","tick").key($t),m=ce("path","domain"),p=()=>({offset:[0,c+h]}),y=()=>({path:[[0,0],[0,c]]}),b=a.labelOffset||p,x=a.tickPath||y,v=(e,t)=>{let a=0;return e.bandwidth&&(a=e.bandwidth()/2,e.round()&&(a=R(a))),n=>t(e(n)+a,0)},S=(e,t)=>k()?`translate(${t}, ${e})`:`translate(${e}, ${t})`,w=e=>k()?e.map(e=>[e[1],e[0]]):e,k=()=>"left"===e||"right"===e,V=(e,a,n)=>t[e]?t[e].apply(t,a):n,A=a=>{a.selection&&(f.transition(a),m.transition(a)),a.each((a,d,c)=>{const h=c[d],p=o.select(h);h.__scale__||p.attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor","right"===e?"start":"left"===e?"end":"middle");const y=h.__scale__||t;h.__scale__=t.copy();const A=null==i?V("ticks",n,t.domain()):i,I=null==l?V("tickFormat",n,$t):l,T="bottom"===e||"right"===e?1:-1,_=([e,t])=>[e,T*t],E=t.range(),P=w([[E[0],T*s],[E[0],0],[E[1],0],[E[1],T*s]]),B=m(p,[a]);B.attr("d",u(P)).attr("stroke","#000");const z=f(p,A),g=A.map((e,t)=>b(e,t,A)),C=A.map((e,t)=>x(e,t,A));z.enter().attr("transform",v(y,S)).append("path").attr("stroke","#000"),z.enter().append("text").attr("transform",(e,t)=>S(..._(g[t].offset))).attr("fill","#000"),z.exit().attr("transform",v(t,S)),z.select("path").attr("visibility",(e,t)=>C[t].hidden&&"hidden").attr("d",(e,t)=>u(w(C[t].path.map(_)))),z.select("text").attr("visibility",(e,t)=>g[t].hidden&&"hidden").attr("transform",(e,t)=>S(..._(g[t].offset))).attr("dy",()=>{let t="0em";return k()?t="0.32em":"bottom"===e&&(t="0.71em"),t}).text(I),z.attr("transform",v(t,S)),r(z,a,d)})};return A.tickFormat=(...e)=>e.length?(l=e[0],A):l,A.tickSize=(...e)=>e.length?(c=s=+e[0],A):c,A.tickSizeInner=(...e)=>e.length?(c=+e[0],A):c,A.tickSizeOuter=(...e)=>e.length?(s=+e[0],A):s,A.tickPadding=(...e)=>e.length?(h=e[0],A):h,A.decorate=(...e)=>e.length?(r=e[0],A):r,A.scale=(...e)=>e.length?(t=e[0],A):t,A.ticks=(...e)=>(n=[...e],A),A.tickArguments=(...e)=>e.length?(n=null==e[0]?[]:[...e[0]],A):n.slice(),A.tickValues=(...e)=>e.length?(i=null==e[0]?[]:[...e[0]],A):i.slice(),A.orient=()=>e,A},ta=(e,t)=>{let a=!1;const n=(e,n,r)=>{let l=0,o=i.tickSizeInner()+i.tickPadding(),d=!1;if(a){const a=t(e),s=n<r.length-1?t(r[n+1]):t.range()[1];l=(s-a)/2,o=i.tickPadding(),d=n===r.length-1&&a===s}return{offset:[l,o],hidden:d}},i=ea(e,t,{labelOffset:n}),r=e=>i(e);return r.tickCenterLabel=(...e)=>e.length?(a=e[0],r):a,q(r,i),r},aa=e=>ta("top",e),na=e=>ta("bottom",e),ia=e=>ta("left",e),ra=e=>ta("right",e),la=(e,t)=>{let a=null;const n=(e,a,n)=>{if(t.step)return t.step();const i=t(e);return a<n.length-1?t(n[a+1])/i:2*(t.range()[1]-i)},i=(e,t,i)=>{let l=0;return l=a?a(e,t):n(e,t,i)/2,{path:[[l,0],[l,r.tickSizeInner()]],hidden:t===i.length-1}},r=ea(e,t,{labelOffset:()=>({offset:[0,r.tickPadding()]}),tickPath:i}),l=e=>{r(e)};return l.tickOffset=(...e)=>e.length?(a=e[0],l):a,q(l,r),l};var oa=e=>{return t=>{const a=e.ticks?e.ticks():e.domain(),n=t.append("text"),i=a.map(e=>n.text(e).node().getBBox()),r=Y(...i.map(e=>e.height)),l=Y(...i.map(e=>e.width));return n.remove(),{maxHeight:r,maxWidth:l,labelCount:a.length}}};const da="__d3fc-elements__",sa=e=>e[da]||{},ca=(e,t)=>void(e[da]=t),ha=e=>delete e[da],ga=e=>"D3FC-GROUP"===e.tagName?[e,...e.querySelectorAll("d3fc-canvas, d3fc-group, d3fc-svg")]:[e],ua=e=>{const{width:t,height:a}=sa(e),n=e.useDevicePixelRatio&&null!=global.devicePixelRatio?global.devicePixelRatio:1,i=e.clientWidth*n,r=e.clientHeight*n;ca(e,{pixelRatio:n,width:i,height:r,resized:i!==t||r!==a})};if("function"!=typeof CustomEvent)throw new Error("d3fc-element depends on CustomEvent. Make sure that you load a polyfill in older browsers. See README.");const fa=e=>{const t=sa(e),a=new CustomEvent("measure",{detail:t});e.dispatchEvent(a)},ma=e=>{const t=sa(e),a=new CustomEvent("draw",{detail:t});e.dispatchEvent(a)};var pa=e=>{const t=e.map(ga).reduce((e,t)=>e.concat(t));t.forEach(ua),t.forEach(fa),t.forEach(ma)};const ya=e=>sa(e.ownerDocument).queue||[],ba=(e,t)=>{let{requestId:a}=sa(e.ownerDocument);null==a&&(a=requestAnimationFrame(()=>{const t=ya(e);pa(t),xa(e)})),ca(e.ownerDocument,{queue:t,requestId:a})},xa=e=>ha(e.ownerDocument),va=(e,t)=>{let a=e;do if(a.parentNode===t)return!0;while(a=a.parentNode);return!1};var Sa=e=>{const t=ya(e),a=-1<t.indexOf(e);if(!a){const a=t.some(t=>va(e,t));if(!a){const a=t.filter(t=>!va(t,e));a.push(e),ba(e,a)}}};if("function"!=typeof HTMLElement)throw new Error("d3fc-element depends on Custom Elements (v1). Make sure that you load a polyfill in older browsers. See README.");const wa=e=>{null!=e.__measureListener__||(e.__measureListener__=t=>e.setMeasurements(t.detail),e.addEventListener("measure",e.__measureListener__))},ka=e=>{null==e.__measureListener__||(e.removeEventListener("measure",e.__measureListener__),e.__measureListener__=null)};var Va=(e,t)=>class extends HTMLElement{static get observedAttributes(){return["use-device-pixel-ratio"]}attributeChangedCallback(e){"use-device-pixel-ratio"===e?this.requestRedraw():void 0}connectedCallback(){0===this.childNodes.length&&this.appendChild(e()),wa(this)}disconnectedCallback(){ka(this)}setMeasurements({width:e,height:a}){const{childNodes:[n,...i]}=this;if(0<i.length)throw new Error("A d3fc-svg/canvas element must only contain a single svg/canvas element.");t(this,n,{width:e,height:a})}get useDevicePixelRatio(){return this.hasAttribute("use-device-pixel-ratio")&&"false"!==this.getAttribute("use-device-pixel-ratio")}set useDevicePixelRatio(e){e&&!this.useDevicePixelRatio?this.setAttribute("use-device-pixel-ratio",""):!e&&this.useDevicePixelRatio&&this.removeAttribute("use-device-pixel-ratio"),this.requestRedraw()}requestRedraw(){Sa(this)}};class Aa extends Va(()=>document.createElement("canvas"),(e,t,{width:a,height:n})=>{if(t.setAttribute("width",a),t.setAttribute("height",n),e.setWebglViewport){const e=t.getContext("webgl");e.viewport(0,0,a,n)}}){get setWebglViewport(){return this.hasAttribute("set-webgl-viewport")&&"false"!==this.getAttribute("set-webgl-viewport")}set setWebglViewport(e){e&&!this.setWebglViewport?this.setAttribute("set-webgl-viewport",""):!e&&this.setWebglViewport&&this.removeAttribute("set-webgl-viewport"),this.requestRedraw()}}const Ia=e=>{e.autoResize?Ta(e):_a(e)},Ta=e=>{null!=e.__autoResizeListener__||(e.__autoResizeListener__=()=>Sa(e),addEventListener("resize",e.__autoResizeListener__))},_a=e=>{null==e.__autoResizeListener__||(removeEventListener("resize",e.__autoResizeListener__),e.__autoResizeListener__=null)};class Ea extends HTMLElement{connectedCallback(){Ia(this)}disconnectedCallback(){_a(this)}requestRedraw(){Sa(this)}get autoResize(){return this.hasAttribute("auto-resize")&&"false"!==this.getAttribute("auto-resize")}set autoResize(e){e&&!this.autoResize?this.setAttribute("auto-resize",""):!e&&this.autoResize&&this.removeAttribute("auto-resize"),Ia(this)}static get observedAttributes(){return["auto-resize"]}attributeChangedCallback(e){"auto-resize"===e?Ia(this):void 0}}var Pa=Va(()=>document.createElementNS("http://www.w3.org/2000/svg","svg"),(e,t,{width:a,height:n})=>{t.setAttribute("viewBox",`0 0 ${a} ${n}`)});const Ba=document.createElement("style");if(Ba.setAttribute("type","text/css"),document.querySelector("head").appendChild(Ba),Ba.styleSheet?Ba.styleSheet.cssText+="d3fc-canvas,d3fc-svg{position:relative;display:block}d3fc-canvas>canvas,d3fc-svg>svg{position:absolute;height:100%;width:100%}d3fc-svg>svg{overflow:visible}":Ba.textContent+="d3fc-canvas,d3fc-svg{position:relative;display:block}d3fc-canvas>canvas,d3fc-svg>svg{position:absolute;height:100%;width:100%}d3fc-svg>svg{overflow:visible}","object"!=typeof customElements||"function"!=typeof customElements.define)throw new Error("d3fc-element depends on Custom Elements (v1). Make sure that you load a polyfill in older browsers. See README.");customElements.define("d3fc-canvas",Aa),customElements.define("d3fc-group",Ea),customElements.define("d3fc-svg",Pa);var za=(...e)=>{const t={},a=e=>{for(const a of Object.keys(t))e[a].apply(null,t[a]);return e};for(const n of e)a[n]=(...e)=>e.length?(t[n]=e,a):t[n];return a};const Ca=document.createElement("style");Ca.setAttribute("type","text/css"),document.querySelector("head").appendChild(Ca),Ca.styleSheet?Ca.styleSheet.cssText+="d3fc-group.cartesian-chart{width:100%;height:100%;overflow:hidden;display:grid;display:-ms-grid;grid-template-columns:minmax(1em,max-content) auto 1fr auto minmax(1em,max-content);-ms-grid-columns:minmax(1em,max-content) auto 1fr auto minmax(1em,max-content);grid-template-rows:minmax(1em,max-content) auto 1fr auto minmax(1em,max-content);-ms-grid-rows:minmax(1em,max-content) auto 1fr auto minmax(1em,max-content);}\nd3fc-group.cartesian-chart>.top-label{align-self:center;-ms-grid-column-align:center;justify-self:center;-ms-grid-row-align:center;grid-column:3;-ms-grid-column:3;grid-row:1;-ms-grid-row:1;}\nd3fc-group.cartesian-chart>.top-axis{height:2em;grid-column:3;-ms-grid-column:3;grid-row:2;-ms-grid-row:2;}\nd3fc-group.cartesian-chart>.left-label{align-self:center;-ms-grid-column-align:center;justify-self:center;-ms-grid-row-align:center;grid-column:1;-ms-grid-column:1;grid-row:3;-ms-grid-row:3;}\nd3fc-group.cartesian-chart>.left-axis{width:3em;grid-column:2;-ms-grid-column:2;grid-row:3;-ms-grid-row:3;}\nd3fc-group.cartesian-chart>.plot-area{overflow:hidden;grid-column:3;-ms-grid-column:3;grid-row:3;-ms-grid-row:3;}\nd3fc-group.cartesian-chart>.right-axis{width:3em;grid-column:4;-ms-grid-column:4;grid-row:3;-ms-grid-row:3;}\nd3fc-group.cartesian-chart>.right-label{align-self:center;-ms-grid-column-align:center;justify-self:center;-ms-grid-row-align:center;grid-column:5;-ms-grid-column:5;grid-row:3;-ms-grid-row:3;}\nd3fc-group.cartesian-chart>.bottom-axis{height:2em;grid-column:3;-ms-grid-column:3;grid-row:4;-ms-grid-row:4;}\nd3fc-group.cartesian-chart>.bottom-label{align-self:center;-ms-grid-column-align:center;justify-self:center;-ms-grid-row-align:center;grid-column:3;-ms-grid-column:3;grid-row:5;-ms-grid-row:5;}\nd3fc-group.cartesian-chart>.y-label{display:flex;transform:rotate(-90deg);width:1em;white-space:nowrap;justify-content:center;}":Ca.textContent+="d3fc-group.cartesian-chart{width:100%;height:100%;overflow:hidden;display:grid;display:-ms-grid;grid-template-columns:minmax(1em,max-content) auto 1fr auto minmax(1em,max-content);-ms-grid-columns:minmax(1em,max-content) auto 1fr auto minmax(1em,max-content);grid-template-rows:minmax(1em,max-content) auto 1fr auto minmax(1em,max-content);-ms-grid-rows:minmax(1em,max-content) auto 1fr auto minmax(1em,max-content);}\nd3fc-group.cartesian-chart>.top-label{align-self:center;-ms-grid-column-align:center;justify-self:center;-ms-grid-row-align:center;grid-column:3;-ms-grid-column:3;grid-row:1;-ms-grid-row:1;}\nd3fc-group.cartesian-chart>.top-axis{height:2em;grid-column:3;-ms-grid-column:3;grid-row:2;-ms-grid-row:2;}\nd3fc-group.cartesian-chart>.left-label{align-self:center;-ms-grid-column-align:center;justify-self:center;-ms-grid-row-align:center;grid-column:1;-ms-grid-column:1;grid-row:3;-ms-grid-row:3;}\nd3fc-group.cartesian-chart>.left-axis{width:3em;grid-column:2;-ms-grid-column:2;grid-row:3;-ms-grid-row:3;}\nd3fc-group.cartesian-chart>.plot-area{overflow:hidden;grid-column:3;-ms-grid-column:3;grid-row:3;-ms-grid-row:3;}\nd3fc-group.cartesian-chart>.right-axis{width:3em;grid-column:4;-ms-grid-column:4;grid-row:3;-ms-grid-row:3;}\nd3fc-group.cartesian-chart>.right-label{align-self:center;-ms-grid-column-align:center;justify-self:center;-ms-grid-row-align:center;grid-column:5;-ms-grid-column:5;grid-row:3;-ms-grid-row:3;}\nd3fc-group.cartesian-chart>.bottom-axis{height:2em;grid-column:3;-ms-grid-column:3;grid-row:4;-ms-grid-row:4;}\nd3fc-group.cartesian-chart>.bottom-label{align-self:center;-ms-grid-column-align:center;justify-self:center;-ms-grid-row-align:center;grid-column:3;-ms-grid-column:3;grid-row:5;-ms-grid-row:5;}\nd3fc-group.cartesian-chart>.y-label{display:flex;transform:rotate(-90deg);width:1em;white-space:nowrap;justify-content:center;}";const La=e=>"function"==typeof e?e:()=>e;var Da=(...e)=>{const{xScale:t,yScale:a,xAxis:n,yAxis:r}=Ra(...e);let l=La(""),d=La(""),s=La(""),c=La(null),h=La(null),g=La("right"),u=La("bottom"),f=null,m=null,p=null,y=za("tickFormat","ticks","tickArguments","tickSize","tickSizeInner","tickSizeOuter","tickValues","tickPadding","tickCenterLabel"),b=()=>{},x=za("tickFormat","ticks","tickArguments","tickSize","tickSizeInner","tickSizeOuter","tickValues","tickPadding","tickCenterLabel"),v=()=>{},S=()=>{};const w=ce("d3fc-group","cartesian-chart"),k=ce("d3fc-canvas","gl-plot-area"),V=ce("d3fc-canvas","canvas-plot-area"),A=ce("d3fc-svg","plot-area"),I=ce("d3fc-svg","x-axis").key(e=>e),T=ce("d3fc-svg","y-axis").key(e=>e),_=ce("div","chart-label"),E=ce("div","x-label").key(e=>e),P=ce("div","y-label").key(e=>e),B=e=>t=>e.selection?t.transition(e):t,z=e=>{const z=B(e);e.each((e,i,B)=>{const C=w(o.select(B[i]),[e]);C.enter().attr("auto-resize",""),_(C,[u(e)]).attr("class",e=>"top"===e?"chart-label bottom-label":"chart-label top-label").style("margin-bottom",e=>"top"===e?0:"1em").style("margin-top",e=>"top"===e?"1em":0).text(l(e)),E(C,[u(e)]).attr("class",e=>`x-label ${e}-label`).text(d(e)),P(C,[g(e)]).attr("class",e=>`y-label ${e}-label`).text(s(e)),k(C,f?[e]:[]).attr("set-webgl-viewport","").classed("plot-area",!0).on("draw",(e,n,i)=>{const r=o.select(i[n]).select("canvas").node();f.context(r.getContext("webgl")).xScale(t).yScale(a),f(e)}),V(C,m?[e]:[]).classed("plot-area",!0).on("draw",(e,n,i)=>{const r=o.select(i[n]).select("canvas").node();m.context(r.getContext("2d")).xScale(t).yScale(a),m(e)}),A(C,p?[e]:[]).on("draw",(e,n,i)=>{p.xScale(t).yScale(a),z(o.select(i[n])).select("svg").call(p)}),I(C,[u(e)]).attr("class",e=>`x-axis ${e}-axis`).style("height",c(e)).on("measure",(e,a,n)=>{const{width:i,height:r}=o.event.detail;"top"===e&&o.select(n[a]).select("svg").attr("viewBox",`0 ${-r} ${i} ${r}`),t.range([0,i])}).on("draw",(e,a,i)=>{const r="top"===e?n.top(t):n.bottom(t);r.decorate(b),z(o.select(i[a])).select("svg").call(y(r))}),T(C,[g(e)]).attr("class",e=>`y-axis ${e}-axis`).style("width",h(e)).on("measure",(e,t,n)=>{const{width:i,height:r}=o.event.detail;"left"===e&&o.select(n[t]).select("svg").attr("viewBox",`${-i} 0 ${i} ${r}`),a.range([r,0])}).on("draw",(e,t,n)=>{const i="left"===e?r.left(a):r.right(a);i.decorate(v),z(o.select(n[t])).select("svg").call(x(i))}),C.each((e,t,a)=>a[t].requestRedraw()),S(C,e,i)})},C=K(/range\w*/,/tickFormat/);return q(z,t,C,ee("x")),q(z,a,C,ee("y")),q(z,y,ee("x")),q(z,x,ee("y")),z.xOrient=(...e)=>e.length?(u=La(e[0]),z):u,z.yOrient=(...e)=>e.length?(g=La(e[0]),z):g,z.xDecorate=(...e)=>e.length?(b=e[0],z):b,z.yDecorate=(...e)=>e.length?(v=e[0],z):v,z.chartLabel=(...e)=>e.length?(l=La(e[0]),z):l,z.xLabel=(...e)=>e.length?(d=La(e[0]),z):d,z.yLabel=(...e)=>e.length?(s=La(e[0]),z):s,z.xAxisHeight=(...e)=>e.length?(c=La(e[0]),z):c,z.yAxisWidth=(...e)=>e.length?(h=La(e[0]),z):h,z.webglPlotArea=(...e)=>e.length?(f=e[0],z):f,z.canvasPlotArea=(...e)=>e.length?(m=e[0],z):m,z.svgPlotArea=(...e)=>e.length?(p=e[0],z):p,z.decorate=(...e)=>e.length?(S=e[0],z):S,z};const Ra=(...e)=>{const t={xScale:a.scaleIdentity(),yScale:a.scaleIdentity(),xAxis:{bottom:na,top:aa},yAxis:{right:ra,left:ia}};return 1!==e.length||e[0].domain||e[0].range?Object.assign(t,{xScale:e[0]||t.xScale,yScale:e[1]||t.yScale}):Object.assign(t,e[0])},Oa=e=>"function"==typeof e?e:()=>e;var Ha=(e,t)=>(...a)=>{let n=Oa(""),i=t,r=()=>{};const l=Da(...a),o=t=>{e(l,i),l.decorate((e,t,a)=>{e.enter().select(".x-label").style("height","1em").style("line-height","1em");const i=l.yOrient()(t);e.enter().append("div").attr("class","y-label-container").style("grid-column","left"===i?1:5).style("-ms-grid-column","left"===i?1:5).style("grid-row",3).style("-ms-grid-row",3).style("width","1em").style("display","flex").style("align-items","center").style("justify-content","center").style("white-space","nowrap").append("div").attr("class","y-label").style("transform","rotate(-90deg)"),e.select(".y-label-container>.y-label").text(n),r(e,t,a)}),t.call(l)};return q(o,l,J(/^x/,/^y/,"chartLabel")),o.yLabel=(...e)=>e.length?(n=Oa(e[0]),o):n,o.plotArea=(...e)=>e.length?(i=e[0],o):i,o.decorate=(...e)=>e.length?(r=e[0],o):r,o},Na=Ha((e,t)=>e.svgPlotArea(t),Te),Wa=Ha((e,t)=>e.canvasPlotArea(t),_e);const Ya=e=>"x"===e?c.brushX():"y"===e?c.brushY():"xy"===e?c.brush():void 0,Ga=e=>[e[1],e[0]],Ma=e=>{const t=Ya(e),n=s.dispatch("brush","start","end");let i=a.scaleIdentity(),r=a.scaleIdentity();const l=ce("g","brush"),d=(t,a,n)=>"x"===e?t.map(a):"y"===e?t.map(n):"xy"===e?[[a(t[0][0]),n(t[0][1])],[a(t[1][0]),n(t[1][1])]]:void 0,c=e=>d(e,a.scaleLinear().domain(i.range()).invert,a.scaleLinear().domain(Ga(r.range())).invert),h=e=>d(e,a.scaleLinear().domain(i.range()),a.scaleLinear().domain(Ga(r.range()))),g=t=>{const n=a.scaleLinear().domain(i.domain());return"x"===e?t.map(n.invert):"xy"===e?[n.invert(t[0][0]),n.invert(t[1][0])]:void 0},u=t=>{const n=a.scaleLinear().domain(Ga(r.domain()));return"y"===e?[t[1],t[0]].map(n.invert):"xy"===e?[n.invert(t[1][1]),n.invert(t[0][1])]:void 0},f=e=>{if(!(e.sourceEvent&&"draw"===e.sourceEvent.type))if(e.selection){const t=h(e.selection);n.call(e.type,{},{selection:t,xDomain:g(t),yDomain:u(t)})}else n.call(e.type,{},{})},m=e=>{e.each((e,a,n)=>{t.extent([[i.range()[0],r.range()[1]],[i.range()[1],r.range()[0]]]),t.on("end",()=>f(o.event)).on("brush",()=>f(o.event)).on("start",()=>f(o.event));const d=l(o.select(n[a]),[e]);d.call(t).call(t.move,e?c(e):null)})};return m.xScale=(...e)=>e.length?(i=e[0],m):i,m.yScale=(...e)=>e.length?(r=e[0],m):r,U(m,n,"on"),U(m,t,"filter","handleSize"),m};e.annotationCanvasBand=()=>{let e=a.scaleIdentity(),t=a.scaleIdentity(),n="horizontal",r=e=>e.from,l=e=>e.to,o=()=>{};const s=ie().horizontalAlign("right").verticalAlign("top");var c=a=>{if("horizontal"!==n&&"vertical"!==n)throw new Error("Invalid orientation");const c=s.context(),h="horizontal"===n,g=h?e:t,u=h?t:e,f=g.range(),m=f[1]-f[0],p=h?"x":"y",y=h?"y":"x",b=h?"height":"width",x=h?"width":"height";a.forEach((e,t)=>{c.save(),c.beginPath(),c.strokeStyle="transparent",s[y](u(r(e))),s[p](f[0]),s[x](m),s[b](u(l(e))-u(r(e))),o(c,e,t),s.context(c)([e],t),c.fill(),c.stroke(),c.closePath(),c.restore()})};return c.xScale=(...t)=>t.length?(e=t[0],c):e,c.yScale=(...e)=>e.length?(t=e[0],c):t,c.orient=(...e)=>e.length?(n=e[0],c):n,c.decorate=(...e)=>e.length?(o=e[0],c):o,c.fromValue=(...e)=>e.length?(r=qt(e[0]),c):r,c.toValue=(...e)=>e.length?(l=qt(e[0]),c):l,U(c,s,"context"),c},e.annotationCanvasCrosshair=()=>{let e=e=>e.x,t=e=>e.y,n=a.scaleIdentity(),i=a.scaleIdentity();const r=Lt(),l=Kt(),o=Kt().orient("vertical"),s=a.scaleIdentity(),c=a.scaleIdentity(),h=Mt().series([l,o,r]).xScale(s).yScale(c).mapping(e=>[e]),g=a=>{a.forEach(a=>{s.range(n.range()),c.range(i.range()),r.crossValue(e).mainValue(t),l.value(t),o.value(e),h(a)})};g.x=(...t)=>t.length?(e=t[0],g):e,g.y=(...e)=>e.length?(t=e[0],g):t,g.xScale=(...e)=>e.length?(n=e[0],g):n,g.yScale=(...e)=>e.length?(i=e[0],g):i;const u=J("label","decorate");return q(g,l,u,ee("y")),q(g,o,u,ee("x")),U(g,r,"decorate"),U(g,h,"context"),g},e.annotationCanvasGridline=()=>{let e=()=>{},t=()=>{};const a=Jt(),n=Jt(),r=d.line(),l=()=>{const l=r.context(),o=a.scale(),s=n.scale();a().forEach((t,a)=>{l.save(),l.beginPath(),l.strokeStyle="#bbb",l.fillStyle="transparent",e(l,t,a),r.context(l)(s.domain().map(e=>[o(t),s(e)])),l.fill(),l.stroke(),l.closePath(),l.restore()}),n().forEach((e,a)=>{l.save(),l.beginPath(),l.strokeStyle="#bbb",l.fillStyle="transparent",t(l,e,a),r.context(l)(o.domain().map(t=>[o(t),s(e)])),l.fill(),l.stroke(),l.closePath(),l.restore()})};return l.yDecorate=(...e)=>e.length?(t=e[0],l):t,l.xDecorate=(...t)=>t.length?(e=t[0],l):e,q(l,a,ee("x")),q(l,n,ee("y")),U(l,r,"context"),l},e.annotationCanvasLine=Kt,e.annotationSvgBand=()=>{let e=a.scaleIdentity(),t=a.scaleIdentity(),n="horizontal",i=e=>e.from,r=e=>e.to,l=()=>{};const d=ce("g","annotation-band"),s=ie().horizontalAlign("center").verticalAlign("center").x(0).y(0);var c=a=>{if(a.selection&&d.transition(a),"horizontal"!==n&&"vertical"!==n)throw new Error("Invalid orientation");const c="horizontal"===n,h=c?(e,t)=>`translate(${e}, ${t})`:(e,t)=>`translate(${t}, ${e})`,g=c?e:t,u=c?t:e,f=g.range(),m=f[1]-f[0],p=c?"height":"width",y=c?"width":"height",b=(...e)=>h((f[1]+f[0])/2,(u(r(...e))+u(i(...e)))/2);s[y](m),s[p]((...e)=>u(r(...e))-u(i(...e))),a.each((e,t,a)=>{var i=d(o.select(a[t]),e);i.enter().attr("transform",b).append("path").classed("band",!0),i.attr("class",`annotation-band ${n}`).attr("transform",b).select("path").attr("d",(e,t)=>s([e],t)),l(i,e,t)})};return c.xScale=(...t)=>t.length?(e=t[0],c):e,c.yScale=(...e)=>e.length?(t=e[0],c):t,c.orient=(...e)=>e.length?(n=e[0],c):n,c.decorate=(...e)=>e.length?(l=e[0],c):l,c.fromValue=(...e)=>e.length?(i=qt(e[0]),c):i,c.toValue=(...e)=>e.length?(r=qt(e[0]),c):r,c},e.annotationSvgCrosshair=function(){let e=e=>e.x,t=e=>e.y,n=a.scaleIdentity(),i=a.scaleIdentity(),r=()=>{};const l=ce("g","annotation-crosshair"),d=Ct(),s=jt(),c=jt().orient("vertical"),h=a.scaleIdentity(),u=a.scaleIdentity(),f=Gt().series([s,c,d]).xScale(h).yScale(u).mapping(e=>[e]),m=a=>{a.selection&&l.transition(a),a.each((a,m,p)=>{const y=l(o.select(p[m]),a);y.enter().style("pointer-events","none"),h.range(n.range()),u.range(i.range()),d.crossValue(e).mainValue(t),s.value(t),c.value(e),y.call(f),r(y,a,m)})};m.x=(...t)=>t.length?(e=t[0],m):e,m.y=(...e)=>e.length?(t=e[0],m):t,m.xScale=(...e)=>e.length?(n=e[0],m):n,m.yScale=(...e)=>e.length?(i=e[0],m):i,m.decorate=(...e)=>e.length?(r=e[0],m):r;const p=J("label");return q(m,s,p,ee("y")),q(m,c,p,ee("x")),m},e.annotationSvgGridline=()=>{let e=()=>{},t=()=>{};const a=Jt(),n=Jt(),i=ce("line","gridline-y").key(Zt),r=ce("line","gridline-x").key(Zt),l=l=>{l.selection&&(i.transition(l),r.transition(l)),l.each((l,d,s)=>{const c=s[d],h=o.select(s[d]),g=a.scale(),u=n.scale(),f=c.__x_scale__||g;c.__x_scale__=g.copy();const m=a(),p=i(h,m);p.enter().attr("x1",f).attr("x2",f).attr("y1",u.range()[0]).attr("y2",u.range()[1]),p.attr("x1",g).attr("x2",g).attr("y1",u.range()[0]).attr("y2",u.range()[1]).attr("stroke","#bbb"),p.exit().attr("x1",g).attr("x2",g),e(p,m,d);const y=c.__y_scale__||u;c.__y_scale__=u.copy();const b=n(),x=r(h,b);x.enter().attr("y1",y).attr("y2",y).attr("x1",g.range()[0]).attr("x2",g.range()[1]),x.attr("y1",u).attr("y2",u).attr("x1",g.range()[0]).attr("x2",g.range()[1]).attr("stroke","#bbb"),x.exit().attr("y1",u).attr("y2",u),t(x,b,d)})};return l.yDecorate=(...e)=>e.length?(t=e[0],l):t,l.xDecorate=(...t)=>t.length?(e=t[0],l):e,q(l,i,Z({key:"xKey"})),q(l,r,Z({key:"yKey"})),q(l,a,ee("x")),q(l,n,ee("y")),l},e.annotationSvgLine=jt,e.attributeBuilder=Pe,e.autoBandwidth=e=>{let a=.75;const n=e=>{if(1>=e.length)return 10;e=Ut(e);const n=t.pairs(e).map(e=>G(e[0]-e[1])),i=t.min(n);return a*i},i=(t,a,i)=>{if(t.bandwidth)return t.bandwidth();else{const r=Array.isArray(a)?[].concat(...a):a,l=r.filter(e.defined()).map(i()).map(t),o=n(l);return o}},r=t=>{const a=t=>{if(e.xBandwidth&&e.yBandwidth)e.xBandwidth(i(e.xScale(),t,e.xValue)),e.yBandwidth(i(e.yScale(),t,e.yValue));else{const a=e.orient&&"horizontal"===e.orient()?e.yScale():e.xScale();e.bandwidth(i(a,t,e.crossValue))}};t instanceof o.selection?t.each((t,n,i)=>{a(t),e(o.select(i[n]))}):(a(t),e(t))};return q(r,e),r.widthFraction=(...e)=>e.length?(a=e[0],r):a,r},e.axisBottom=na,e.axisLabelOffset=e=>{let t="auto",a=()=>{};const n=()=>"left"===e.orient()||"right"===e.orient(),r=()=>"top"===e.orient()||"left"===e.orient()?-1:1,l=a=>{const{maxHeight:l,maxWidth:o,labelCount:d}=oa(e.scale())(a),s=e.scale().range()[1],c="auto"===t?O((n()?l:o)*d/s)+1:t,h=a.select("text"),g=h.attr("transform"),u=e=>n()?`translate(${e%c*o*r()}, 0)`:`translate(0, ${e%c*l*r()})`;h.attr("transform",(e,t)=>`${g} ${u(t)}`)},o=t=>e(t);return e.decorate(e=>{l(e),a(e)}),o.decorate=(...e)=>e.length?(a=e[0],o):a,o.labelOffsetDepth=(...e)=>e.length?(t=e[0],o):t,q(o,e,K("decorate")),o},e.axisLabelRotate=e=>{let t="auto",a=()=>{};const n=()=>"left"===e.orient()||"right"===e.orient(),i=()=>"top"===e.orient()||"left"===e.orient()?-1:1,r=()=>{switch(e.orient()){case"top":case"right":return"start";default:return"end";}},l=a=>{const{maxHeight:l,maxWidth:o,labelCount:d}=oa(e.scale())(a),s=d*o;let c;if("auto"===t){const t=e.scale().range()[1];c=t<s?90*H(1,(s/t-.8)/2):0}else c=t;return{rotate:n()?O(i()*(90-c)):O(-c),maxHeight:l,maxWidth:o,anchor:c?r():"middle"}},o=e=>{const{rotate:t,maxHeight:a,anchor:r}=l(e),o=e.select("text"),d=o.attr("transform"),s=i()*O(a/2),c=n()?`translate(${s}, 0)`:`translate(0, ${s})`;o.style("text-anchor",r).attr("transform",`${d} ${c} rotate(${t} 0 0)`)},d=t=>{e(t)};return e.decorate(e=>{o(e),a(e)}),d.decorate=(...e)=>e.length?(a=e[0],d):a,d.labelRotate=(...e)=>e.length?(t=e[0],d):t,q(d,e,K("decorate")),d},e.axisLeft=ia,e.axisOrdinalBottom=e=>la("bottom",e),e.axisOrdinalLeft=e=>la("left",e),e.axisOrdinalRight=e=>la("right",e),e.axisOrdinalTop=e=>la("top",e),e.axisRight=ra,e.axisTop=aa,e.barFill=()=>{let e=[.86,.86,.86,1];const t=t=>{t.vertexShader().appendHeaderIfNotExists(Ge.header).appendBodyIfNotExists(Ge.body),t.fragmentShader().appendHeaderIfNotExists(dt.header).appendBodyIfNotExists(dt.body),t.buffers().uniform("uColor",Be(e))};return t.color=(...a)=>{if(!a.length)return e;const n=a[0],i="0x"+n[1]+n[2],r="0x"+n[3]+n[4],l="0x"+n[5]+n[6];return e=[+(i/255),+(r/255),+(l/255),1],t},t},e.brush=()=>Ma("xy"),e.brushX=()=>Ma("x"),e.brushY=()=>Ma("y"),e.bucket=B,e.bufferBuilder=Ee,e.chartCanvasCartesian=Wa,e.chartCartesian=Da,e.chartSvgCartesian=Na,e.circlePointShader=ut,e.dataJoin=ce,e.discontinuityIdentity=w,e.discontinuityRange=(...e)=>{const t=(e,t)=>e>t[0]&&e<t[1],a=(e,t)=>e[0]>=t[0]&&e[1]<=t[1];var n={};n.distance=(t,i)=>{t=n.clampUp(t),i=n.clampDown(i);const r=e.filter(e=>a(e,[t,i])),l=r.map(e=>e[1]-e[0]);return i-t-l.reduce((e,t)=>e+t,0)};const i=(e,t)=>e instanceof Date?new Date(e.getTime()+t):e+t;return n.offset=(t,a)=>{if(0<a){let l=n.clampUp(t),o=a;for(;0<o;){const t=e.filter(e=>e[0]>l).sort((e,t)=>e[0]-t[0]);if(t.length){const e=t[0],a=e[0]-l;a>o?(l=i(l,o),o=0):(l=e[1],o-=a)}else l=i(l,o),o=0}return l}else{let l=n.clampDown(t),o=a;for(;0>o;){const t=e.filter(e=>e[1]<l).sort((e,t)=>t[0]-e[0]);if(t.length){const e=t[0],a=e[1]-l;a<o?(l=i(l,o),o=0):(l=e[0],o-=a)}else l=i(l,o),o=0}return l}},n.clampUp=a=>e.reduce((e,a)=>t(e,a)?a[1]:e,a),n.clampDown=a=>e.reduce((e,a)=>t(e,a)?a[0]:e,a),n.copy=()=>n,n},e.discontinuitySkipUtcWeekends=()=>te(e=>e.getUTCDay(),n.utcDay,n.utcSaturday,n.utcMonday),e.discontinuitySkipWeekends=()=>te(e=>e.getDay(),n.timeDay,n.timeSaturday,n.timeMonday),e.effectivelyZero=se,e.exclude=K,e.extentDate=I,e.extentLinear=A,e.extentTime=I,e.feedGdax=P,e.fragmentShaderSnippets=gt,e.glArea=Et,e.glBar=At,e.glBoxPlot=zt,e.glCandlestick=Pt,e.glErrorBar=Tt,e.glLine=St,e.glOhlc=kt,e.glPoint=xt,e.glScaleLinear=He,e.glScaleLog=Ne,e.glScalePow=We,e.group=()=>{let e="",t="vertical",a=(e,t)=>+e[t];const n=t=>Object.keys(t[0]).filter(t=>t!==e).map(n=>{const i=t.filter(e=>e[n]).map(t=>{const i=[t[e],a(t,n)];return i.data=t,i});return i.key=n,i}),i=t=>t.map(t=>{const n=Object.keys(t).filter(t=>t!==e).map(e=>{const n=[e,a(t,e)];return n.data=t,n});return n.key=t[e],n}),r=e=>"vertical"===t?n(e):i(e);return r.key=(...t)=>t.length?(e=t[0],r):e,r.value=(...e)=>e.length?(a=e[0],r):a,r.orient=(...e)=>e.length?(t=e[0],r):t,r},e.include=J,e.includeMap=Z,e.indicatorBollingerBands=p,e.indicatorElderRay=S,e.indicatorEnvelope=v,e.indicatorExponentialMovingAverage=y,e.indicatorForceIndex=function(){let e=e=>e.volume,t=e=>e.close;const a=y().period(13),n=m().period(2).defined(a=>null!=t(a)&&null!=e(a)).accumulator(a=>a&&f((t(a[1])-t(a[0]))*e(a[1]))),i=e=>{const t=n(e);return a(t)};return i.volumeValue=(...t)=>t.length?(e=t[0],i):e,i.closeValue=(...e)=>e.length?(t=e[0],i):t,U(i,a,"period"),i},e.indicatorMacd=b,e.indicatorMovingAverage=x,e.indicatorRelativeStrengthIndex=function(){const e=m().period(14),a=(e,t)=>t+(e[e.length-1]-t)/e.length,n=([e,t])=>e<t?0:e-t,i=([e,t])=>e>t?0:t-e,r=(e,n)=>void 0===n?t.mean(e):a(e,n),l=()=>{let e,a,l;return o=>{if(!o)return void(void 0!==e&&(e=NaN));if(void 0===e)return void(e=o[0]);const d=t.pairs([e,...o]);a=r(d.map(n),a),l=r(d.map(i),l);const s=isNaN(e)?NaN:l/a;return f(100-100/(1+s))}};var o=t=>{const a=l();return e.accumulator(a),e(t)};return U(o,e,"period","value"),o},e.indicatorStochasticOscillator=function(){let e=e=>e.close,a=e=>e.high,n=e=>e.low;const i=m().period(5).defined(t=>null!=e(t)&&null!=a(t)&&null!=n(t)).accumulator(i=>{const r=i&&t.max(i,a),l=i&&t.min(i,n),o=i&&100*(e(i[i.length-1])-l)/(r-l);return f(o)}),r=x().period(3),l=e=>{const t=i(e),a=r(t);return t.map((e,t)=>({k:e,d:a[t]}))};return l.closeValue=(...t)=>t.length?(e=t[0],l):e,l.highValue=(...e)=>e.length?(a=e[0],l):a,l.lowValue=(...e)=>e.length?(n=e[0],l):n,q(l,i,Z({period:"kPeriod"})),q(l,r,Z({period:"dPeriod"})),l},e.largestTriangleOneBucket=z,e.largestTriangleThreeBucket=C,e.layoutAnnealing=()=>{let e,t=1e3,a=1;const n=e=>{switch(e.location){case"bottom-right":return 0;case"middle-right":case"bottom-center":return e.width*e.height/8;}return e.width*e.height/4},i=t=>e?t.width*t.height-ge(t,e):0,r=(e,t,a)=>ue(a,t)+i(e)+n(e),l=e=>{let n=t;const i=(e,t)=>W((t-e)/n)>Math.random();let l=be().locationScore(r).winningScore(i).rectangles(e);for(;0<n;){const t=ve(e),i=xe(me(e[t]));l=l(i,t),n-=a}return l.rectangles()};return l.temperature=(...e)=>e.length?(t=e[0],l):t,l.cooling=(...e)=>e.length?(a=e[0],l):a,l.bounds=(...t)=>t.length?(e=t[0],l):e,l},e.layoutBoundingBox=()=>{let e=[0,0];const t=t=>t.map(t=>{let a=t.x,n=t.y;return a+t.width>e[0]&&(a-=t.width),n+t.height>e[1]&&(n-=t.height),{height:t.height,width:t.width,x:a,y:n}});return t.bounds=(...a)=>a.length?(e=a[0],t):e,t},e.layoutGreedy=()=>{let e;const t=t=>e?t.width*t.height-ge(t,e):0,a=(e,a,n)=>ue(n,a)+t(e),n=e=>{let t=be().locationScore(a).rectangles(e);return e.forEach((e,a)=>{me(e).forEach(e=>{t=t(e,a)})}),t.rectangles()};return n.bounds=(...t)=>t.length?(e=t[0],n):e,n},e.layoutLabel=e=>{let t=()=>{},n=()=>[0,0],r=e=>[e.x,e.y],l=e||(e=>e),d=()=>{},s=a.scaleIdentity(),c=a.scaleIdentity();const h=ce("g","label"),g=e=>{e.each((e,a,i)=>{const u=h(o.select(i[a]),e).call(d),g=u.nodes(),f=g.map((e,t)=>{let a=o.select(e).datum();const i=r(a,t,g);let l=[s(i[0]),c(i[1])],d=n(a,t,g);return{hidden:!1,x:l[0],y:l[1],width:d[0],height:d[1]}}),m=l(f);u.attr("style",(e,t)=>"display:"+(m[t].hidden?"none":"inherit")).attr("transform",(e,t)=>"translate("+m[t].x+", "+m[t].y+")").attr("layout-width",(e,t)=>m[t].width).attr("layout-height",(e,t)=>m[t].height).attr("anchor-x",(e,t)=>f[t].x-m[t].x).attr("anchor-y",(e,t)=>f[t].y-m[t].y),u.call(d),t(u,e,a)})};return q(g,h,J("key")),q(g,l),g.size=(...e)=>e.length?(n=de(e[0]),g):n,g.position=(...e)=>e.length?(r=de(e[0]),g):r,g.component=(...e)=>e.length?(d=e[0],g):d,g.decorate=(...e)=>e.length?(t=e[0],g):t,g.xScale=(...e)=>e.length?(s=e[0],g):s,g.yScale=(...e)=>e.length?(c=e[0],g):c,g},e.layoutRemoveOverlaps=e=>{e=e||(e=>e);const t=t=>{for(t=e(t);;){const e=t.filter(e=>!e.hidden),a=e.map((t,a)=>[t,ue(e,a)]),n=Se(a,(e,t)=>t[1]-e[1]);if(0<n[1])n[0].hidden=!0;else break}return t};return q(t,e),t},e.layoutTextLabel=()=>{let e=2,t=e=>e;const a=ce("text"),n=ce("rect"),i=ce("circle"),r=r=>{r.each((r,l,d)=>{const s=d[l],c=o.select(s);let h=+s.getAttribute("layout-width"),g=+s.getAttribute("layout-height"),u=n(c,[r]);u.attr("width",h).attr("height",g);let f=+s.getAttribute("anchor-x"),m=+s.getAttribute("anchor-y"),p=i(c,[r]);p.attr("r",2).attr("cx",f).attr("cy",m);let y=a(c,[r]);y.enter().attr("dy","0.9em").attr("transform",`translate(${e}, ${e})`),y.text(t)})};return r.padding=(...t)=>t.length?(e=t[0],r):e,r.value=(...e)=>e.length?(t=de(e[0]),r):t,r},e.lineWidth=bt,e.modeMedian=L,e.pointAntiAlias=()=>{return e=>{e.fragmentShader().appendBodyIfNotExists(ot.body)}},e.pointFill=()=>{let e=[.86,.86,.86,1];const t=t=>{t.fragmentShader().appendHeaderIfNotExists(st.header).appendBodyIfNotExists(st.body),t.buffers().uniform("uColor",Be(e))};return t.color=(...a)=>a.length?(e=a[0],t):e,t},e.pointStroke=()=>{let e=[0,0,0,1],t=1;const a=a=>{a.fragmentShader().appendHeaderIfNotExists(ct.header).appendBodyIfNotExists(ct.body),a.buffers().uniform("uEdgeColor",Be(e)),a.buffers().uniform("uLineWidth",Be(t))};return a.color=(...t)=>t.length?(e=t[0],a):e,a.width=(...e)=>e.length?(t=e[0],a):t,a},e.pointer=()=>{function e(){const e=o.mouse(this);a.call("point",this,[{x:e[0],y:e[1]}])}function t(){void a.call("point",this,[])}const a=s.dispatch("point"),n=a=>{a.on("mouseenter.pointer",e).on("mousemove.pointer",e).on("mouseleave.pointer",t)};return U(n,a,"on"),n},e.prefix=ee,e.programBuilder=Re,e.randomFinancial=E,e.randomGeometricBrownianMotion=T,e.randomSkipWeekends=function(e){const t=e.date.getDay();return 0!==t&&6!==t},e.rebind=U,e.rebindAll=q,e.scaleDiscontinuous=V,e.scaleMapper=Ye,e.seriesCanvasArea=()=>{const e=Ae(),t=d.area(),a=a=>{const n=t.context();t.defined(e.defined());const r=a.map(e.values);t.x((e,t)=>r[t].transposedX).y((e,t)=>r[t].transposedY);const l="vertical"===e.orient()?"y":"x";t[l+"0"]((e,t)=>r[t].y0),t[l+"1"]((e,t)=>r[t].y),n.beginPath(),t(a),n.fillStyle=Ie.gray,n.strokeStyle="transparent",e.decorate()(n,a),n.fill(),n.stroke(),n.closePath()};return q(a,e,K("bandwidth","align")),U(a,t,"curve","context"),a},e.seriesCanvasBar=()=>{const e=Ae(),t=ie().x(0).y(0),a=t=>"vertical"===e.orient()?t.height:t.width,n=t=>"vertical"===e.orient()?t.width:t.height,i=i=>{const r=t.context(),l=i.filter(e.defined()),o=l.map(e.values);"vertical"===e.orient()?(t.verticalAlign("top"),t.horizontalAlign("center")):(t.horizontalAlign("right"),t.verticalAlign("center")),o.forEach((l,o)=>{r.save(),r.beginPath(),r.translate(l.origin[0],l.origin[1]),a(t)(-l.height),n(t)(l.width),t([l]),r.fillStyle=Ie.darkGray,r.strokeStyle="transparent",e.decorate()(r,l.d,o),r.fill(),r.stroke(),r.closePath(),r.restore()})};return q(i,e),U(i,t,"context"),i},e.seriesCanvasBoxPlot=()=>{const e=Wt(),t=le().value(0),a=a=>{const n=a.filter(e.defined()),r=t.context();t.orient(e.orient()),n.forEach((a,n)=>{r.save();const i=e.values(a,n);r.translate(i.origin[0],i.origin[1]),r.beginPath(),t.median(i.median).upperQuartile(i.upperQuartile).lowerQuartile(i.lowerQuartile).high(i.high).width(i.width).low(i.low)([a]),r.fillStyle=Ie.gray,r.strokeStyle=Ie.black,e.decorate()(r,a,n),r.fill(),r.stroke(),r.closePath(),r.restore()})};return q(a,e),U(a,t,"cap","context"),a},e.seriesCanvasCandlestick=()=>Ht(re()),e.seriesCanvasErrorBar=()=>{const e=Dt(),t=oe().value(0),a=a=>{const n=a.filter(e.defined()),r=t.context();t.orient(e.orient()),n.forEach((a,n)=>{r.save();const i=e.values(a,n);r.translate(i.origin[0],i.origin[1]),r.beginPath(),t.high(i.high).width(i.width).low(i.low)([a]),r.strokeStyle=Ie.black,r.fillStyle=Ie.gray,e.decorate()(r,a,n),r.fill(),r.stroke(),r.closePath(),r.restore()})};return q(a,e),U(a,t,"context"),a},e.seriesCanvasGrouped=function(e){const t=Ft(),a=a=>{a.forEach((n,r)=>{const l="horizontal"!==e.orient(),o=(e,n)=>{const i=t.offsetScaleForDatum(a,e,n),o=l?t.xScale():t.yScale();return o(e)+i(r)+i.bandwidth()/2};l?(e.xScale(o),e.yScale(t.yScale())):(e.yScale(o),e.xScale(t.xScale())),e.bandwidth&&e.bandwidth((e,n)=>t.offsetScaleForDatum(a,e,n).bandwidth()),e.decorate((e,a)=>t.decorate()(e,a,r)),e(n)})};return q(a,e,K("decorate","xScale","yScale")),q(a,t,K("offsetScaleForDatum")),a},e.seriesCanvasHeatmap=()=>{const e=Xt(),t=t=>{const a=t.filter(e.defined()),n=e.colorInterpolate(),r=e.colorScale(a),l=e.pathGenerator.context();a.forEach((t,a)=>{l.save(),l.beginPath();const i=e.values(t,a);l.translate(i.x,i.y),l.fillStyle=n(r(i.colorValue)),l.strokeStyle="transparent",e.pathGenerator.height(i.height).width(i.width)([t]),e.decorate()(l,t,a),l.fill(),l.stroke(),l.closePath(),l.restore()})};return U(t,e.pathGenerator,"context"),q(t,e),t},e.seriesCanvasLine=_e,e.seriesCanvasMulti=Mt,e.seriesCanvasOhlc=()=>Ht(ne()),e.seriesCanvasPoint=Lt,e.seriesCanvasRepeat=Qt,e.seriesSvgArea=()=>{const e=Ae(),t=d.area(),a=ce("path","area"),n=n=>{n.selection&&a.transition(n),t.defined(e.defined()),n.each((n,i,r)=>{const l=n.map(e.values);t.x((e,t)=>l[t].transposedX).y((e,t)=>l[t].transposedY);const d="vertical"===e.orient()?"y":"x";t[d+"0"]((e,t)=>l[t].y0),t[d+"1"]((e,t)=>l[t].y);const s=a(o.select(r[i]),[n]);s.enter().attr("fill",Ie.gray),s.attr("d",t),e.decorate()(s,n,i)})};return q(n,e,K("bandwidth","align")),U(n,a,"key"),U(n,t,"curve"),n},e.seriesSvgBar=()=>{const e=ie().x(0).y(0),t=Ae(),a=ce("g","bar"),n=e=>"vertical"===t.orient()?e.height:e.width,r=e=>"vertical"===t.orient()?e.width:e.height,l=e=>"translate("+e[0]+", "+e[1]+")",d=i=>{i.selection&&a.transition(i),i.each((i,d,s)=>{const c=t.orient();if("vertical"!==c&&"horizontal"!==c)throw new Error("The bar series does not support an orientation of "+c);const h=i.filter(t.defined()),u=h.map(t.values);e.width(0).height(0),"vertical"===t.orient()?(e.verticalAlign("top"),e.horizontalAlign("center")):(e.horizontalAlign("right"),e.verticalAlign("center"));const f=a(o.select(s[d]),h);f.enter().attr("transform",(e,t)=>l(u[t].baseOrigin)).attr("class","bar "+t.orient()).attr("fill",Ie.darkGray).append("path").attr("d",(t,a)=>(r(e)(u[a].width),e([t]))),f.attr("transform",(e,t)=>l(u[t].origin)).select("path").attr("d",(t,a)=>(r(e)(u[a].width),n(e)(-u[a].height),e([t]))),t.decorate()(f,h,d)})};return q(d,t),U(d,a,"key"),d},e.seriesSvgBoxPlot=()=>{const e=Wt(),t=ce("g","box-plot"),a=le().value(0),n=e=>t=>e.selection?t.transition(e):t,r=e=>"translate("+e.origin[0]+", "+e.origin[1]+")",l=i=>{i.selection&&t.transition(i);const l=n(i);i.each((n,i,d)=>{const s=n.filter(e.defined()),c=t(o.select(d[i]),s);c.enter().attr("stroke",Ie.black).attr("fill",Ie.gray).attr("transform",(t,a)=>r(e.values(t,a))+" scale(1e-6, 1)").append("path"),a.orient(e.orient()),c.each((t,n,i)=>{const d=e.values(t,n);a.median(d.median).upperQuartile(d.upperQuartile).lowerQuartile(d.lowerQuartile).width(d.width).high(d.high).low(d.low),l(o.select(i[n])).attr("transform",r(d)).select("path").attr("d",a([t]))}),e.decorate()(c,n,i)})};return q(l,e),U(l,t,"key"),U(l,a,"cap"),l},e.seriesSvgCandlestick=()=>Ot(re(),"candlestick"),e.seriesSvgErrorBar=()=>{const e=Dt(),t=ce("g","error-bar"),a=oe().value(0),n=e=>t=>e.selection?t.transition(e):t,r=e=>"translate("+e.origin[0]+", "+e.origin[1]+")",l=i=>{i.selection&&t.transition(i);const l=n(i);i.each((n,i,d)=>{const s=n.filter(e.defined()),c=s.map(e.values),h=t(o.select(d[i]),s);h.enter().attr("stroke",Ie.black).attr("fill",Ie.gray).attr("transform",(t,a)=>r(e.values(t,a))+" scale(1e-6, 1)").append("path"),a.orient(e.orient()),h.each((e,t,n)=>{const i=c[t];a.high(i.high).low(i.low).width(i.width),l(o.select(n[t])).attr("transform",r(i)+" scale(1)").select("path").attr("d",a([e]))}),e.decorate()(h,n,i)})};return q(l,e),U(l,t,"key"),l},e.seriesSvgGrouped=e=>{const t=Ft(),a=ce("g","grouped"),n=n=>{n.selection&&a.transition(n),n.each((n,i,r)=>{const l=a(o.select(r[i]),n);l.enter().append("g"),l.select("g").each((a,r,l)=>{const d=o.select(l[r]),s="horizontal"!==e.orient(),c=(e,a)=>{const i=t.offsetScaleForDatum(n,e,a),l=s?t.xScale():t.yScale();return l(e)+i(r)+i.bandwidth()/2};s?(e.xScale(c),e.yScale(t.yScale())):(e.yScale(c),e.xScale(t.xScale())),e.bandwidth&&e.bandwidth((e,a)=>t.offsetScaleForDatum(n,e,a).bandwidth()),e.decorate((e,a)=>t.decorate()(e,a,r)),d.call(e)})})};return q(n,e,K("decorate","xScale","yScale")),q(n,t,K("offsetScaleForDatum")),n},e.seriesSvgHeatmap=()=>{const e=Xt(),t=ce("g","box"),a=e=>"translate("+e.x+", "+e.y+")",n=n=>{n.each((n,i,r)=>{const l=n.filter(e.defined()),s=e.colorValue(),c=e.colorInterpolate(),h=e.colorScale(l),u=t(o.select(r[i]),l);u.enter().append("path").attr("stroke","transparent"),u.attr("transform",(t,n)=>a(e.values(t,n))).select("path").attr("d",(t,a)=>e.pathGenerator.width(e.values(t,a).width).height(e.values(t,a).height)([t])).attr("fill",(e,t)=>c(h(s(e,t)))),e.decorate()(u,n,i)})};return q(n,e),n},e.seriesSvgLine=Te,e.seriesSvgMulti=Gt,e.seriesSvgOhlc=()=>Ot(ne(),"ohlc"),e.seriesSvgPoint=Ct,e.seriesSvgRepeat=()=>{let e="vertical",t=Te();const a=Gt(),n=n=>n.each((n,i,r)=>{"vertical"===e?a.series(n[0].map(()=>t)).mapping((e,t)=>e.map(e=>e[t])):a.series(n.map(()=>t)).mapping((e,t)=>e[t]),o.select(r[i]).call(a)});return n.series=(...e)=>e.length?(t=e[0],n):t,n.orient=(...t)=>t.length?(e=t[0],n):e,q(n,a,K("series","mapping")),n},e.seriesWebglArea=()=>{const e=Ae(),t=Et(),a=a=>{const n=Ye(e.xScale()),r=Ye(e.yScale()),l=new Float32Array(a.length),o=new Float32Array(a.length),s=new Float32Array(a.length),c=new Float32Array(a.length);a.forEach((t,a)=>{l[a]=n.scale(e.crossValue()(t,a)),o[a]=r.scale(e.mainValue()(t,a)),s[a]=r.scale(e.baseValue()(t,a)),c[a]=e.defined()(t,a)}),t.xValues(l).yValues(o).y0Values(s).defined(c).xScale(n.glScale).yScale(r.glScale).decorate(t=>e.decorate()(t,a,0)),t(a.length)};return q(a,e,K("bandwidth","align")),U(a,t,"context"),a},e.seriesWebglBar=()=>{const e=Ae(),t=At(),a=a=>{const n=a.filter(e.defined()),r=Ye(e.xScale()),l=Ye(e.yScale()),o=new Float32Array(n.length),s=new Float32Array(n.length),c=new Float32Array(n.length),h=new Float32Array(n.length);n.forEach((t,a)=>{o[a]=r.scale(e.crossValue()(t,a)),s[a]=l.scale(e.baseValue()(t,a)),c[a]=l.scale(e.mainValue()(t,a)),h[a]=l.scale(e.bandwidth()(t,a))}),t.xValues(o).y0Values(s).y1Values(c).widths(h).xScale(r.glScale).yScale(l.glScale).decorate(t=>{e.decorate()(t,n,0)}),t(n.length)};return q(a,e,K("align")),U(a,t,"context"),a},e.seriesWebglBoxPlot=()=>{const e=Wt();let t=we(.5);const a=zt(),n=n=>{const i=n.filter(e.defined()),r=Ye(e.xScale()),l=Ye(e.yScale()),o=new Float32Array(i.length),s=new Float32Array(i.length),c=new Float32Array(i.length),h=new Float32Array(i.length),g=new Float32Array(i.length),u=new Float32Array(i.length),f=new Float32Array(i.length),m=new Float32Array(i.length);i.forEach((a,n)=>{o[n]=r.scale(e.crossValue()(a,n)),s[n]=l.scale(e.medianValue()(a,n)),c[n]=l.scale(e.upperQuartileValue()(a,n)),h[n]=r.scale(e.lowerQuartileValue()(a,n)),g[n]=l.scale(e.highValue()(a,n)),u[n]=l.scale(e.lowValue()(a,n)),f[n]=e.bandwidth()(a,n),m[n]=f[n]*t(a,n)}),a.xValues(o).medianValues(s).upperQuartileValues(c).lowerQuartileValues(h).highValues(g).lowValues(u).bandwidth(f).capWidth(m).xScale(r.glScale).yScale(l.glScale),a(i.length)};return n.cap=(...e)=>e.length?(t=we(e[0]),n):t,q(n,e,K("align")),U(n,a,"context","lineWidth"),n},e.seriesWebglCandlestick=()=>Nt(Pt()),e.seriesWebglErrorBar=()=>{const e=Dt(),t=Tt(),a=a=>{const n=a.filter(e.defined()),r=Ye(e.xScale()),l=Ye(e.yScale()),o=new Float32Array(n.length),s=new Float32Array(n.length),c=new Float32Array(n.length),h=new Float32Array(n.length);n.forEach((t,a)=>{o[a]=r.scale(e.crossValue()(t,a)),s[a]=l.scale(e.highValue()(t,a)),c[a]=l.scale(e.lowValue()(t,a)),h[a]=e.bandwidth()(t,a)}),t.xValues(o).high(s).low(c).bandwidth(h).xScale(r.glScale).yScale(l.glScale),t(n.length)};return q(a,e,K("align")),U(a,t,"context","lineWidth"),a},e.seriesWebglLine=()=>{function e(){return"vertical"===t.orient()?{x:t.crossValue(),y:t.mainValue(),defined:t.defined()}:{x:t.mainValue(),y:t.crossValue(),defined:t.defined()}}const t=Ae(),a=St(),n=n=>{const r=Ye(t.xScale()),l=Ye(t.yScale()),o=e(),s=new Float32Array(n.length),c=new Float32Array(n.length),h=new Float32Array(n.length);n.forEach((e,t)=>{s[t]=r.scale(o.x(e,t)),c[t]=l.scale(o.y(e,t)),h[t]=o.defined(e,t)}),a.xValues(s).yValues(c).defined(h).xScale(r.glScale).yScale(l.glScale).decorate(e=>{t.decorate()(e,n,0)}),a(n.length)};return q(n,t,K("baseValue","bandwidth","align")),U(n,a,"context","lineWidth"),n},e.seriesWebglMulti=Mt,e.seriesWebglOhlc=()=>Nt(kt()),e.seriesWebglPoint=()=>{function e(){return"vertical"===t.orient()?{x:t.crossValue(),y:t.mainValue()}:{x:t.mainValue(),y:t.crossValue()}}const t=Ae();let a=64,n=F.symbolCircle;const i=xt(),r=r=>{const l=r.filter(t.defined()),o=Ye(t.xScale()),s=Ye(t.yScale()),c=yt(n),h=e(),g=new Float32Array(l.length),u=new Float32Array(l.length),f=new Float32Array(l.length);l.forEach((e,t)=>{const n="function"==typeof a?a:()=>a;g[t]=o.scale(h.x(e,t)),u[t]=s.scale(h.y(e,t)),f[t]=n(e)}),i.xValues(g).yValues(u).sizes(f).xScale(o.glScale).yScale(s.glScale).type(c).decorate(e=>t.decorate()(e,l,0)),i(l.length)};return r.size=(...e)=>e.length?(a=e[0],r):a,r.type=(...e)=>e.length?(n=e[0],r):n,q(r,t,K("baseValue","bandwidth","align")),U(r,i,"context"),r},e.seriesWebglRepeat=Qt,e.shaderBuilder=ze,e.shapeBar=ie,e.shapeBoxPlot=le,e.shapeCandlestick=re,e.shapeErrorBar=oe,e.shapeOhlc=ne,e.squarePointShader=ft,e.symbolMapper=yt,e.uniformBuilder=Be,e.vertexShaderSnippets=et,Object.defineProperty(e,"__esModule",{value:!0})});
